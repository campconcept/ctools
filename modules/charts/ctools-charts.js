var t,e={121:(t,e,r)=>{r.r(e),r.d(e,{formatDateFromPicker:()=>b,highlightAvailableDates:()=>x,initDatePicker:()=>w,initializeChartResources:()=>d,initializeDatepicker:()=>v,loadChartJs:()=>h,setupDatepickerLocalization:()=>y});var n=r(690),a=r(618);function o(){o=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new O(n||[]);return a(i,"_invoke",{value:L(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function w(){}function b(){}function x(){}var D={};d(D,u,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,u)&&(D=E);var S=x.prototype=w.prototype=Object.create(D);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(a,o,c,u){var l=h(t[a],t,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==i(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(d).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,u)}))}u(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function L(e,r,n){var a=f;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=h(e,r,n);if("normal"===l.type){if(a=n.done?g:v,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=g,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=x,a(S,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(T.prototype),d(T.prototype,l,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new T(p(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(S),d(S,s,"Generator"),d(S,u,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function c(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){c(o,n,a,i,u,"next",t)}function u(t){c(o,n,a,i,u,"throw",t)}i(void 0)}))}}var l=!1,s=!1;function d(){return p.apply(this,arguments)}function p(){return(p=u(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(0,a.C)(),(0,n.Qm)(),t.next=6,h();case 6:return e=t.sent,t.next=9,v();case 9:return r=t.sent,t.abrupt("return",e&&r);case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function h(){return f.apply(this,arguments)}function f(){return(f=u(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s&&"undefined"==typeof Chart){t.next=3;break}return s=!0,t.abrupt("return",!0);case 3:return t.prev=3,t.next=6,g("https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js");case 6:if("undefined"!=typeof Chart){t.next=8;break}throw new Error("Chart.js loaded but Chart object not available");case 8:return s=!0,t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(3),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=u(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l&&"undefined"==typeof tempusDominus){t.next=3;break}return"undefined"!=typeof tempusDominus&&(y(),l=!0),t.abrupt("return",l);case 3:return t.prev=3,e=void 0,(e=document.createElement("link")).rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/@eonasdan/tempus-dominus@6.7.7/dist/css/tempus-dominus.min.css",document.head.appendChild(e),t.next=7,g("https://cdn.jsdelivr.net/npm/@eonasdan/tempus-dominus@6.7.7/dist/js/tempus-dominus.min.js");case 7:if("undefined"!=typeof tempusDominus){t.next=9;break}throw new Error("Tempus Dominus loaded but object not available");case 9:return y(),l=!0,t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t.catch(3),t.abrupt("return",!1);case 18:case"end":return t.stop()}var e}),t,null,[[3,14]])})))).apply(this,arguments)}function g(t){return new Promise((function(e,r){var n=document.createElement("script");n.src=t,n.async=!0,n.onload=function(){return e()},n.onerror=function(t){return r(t)},document.head.appendChild(n)}))}function y(){if("undefined"!=typeof tempusDominus){var t=window.getCurrentLanguage(),e=t.substring(0,2);try{tempusDominus.DefaultOptions.localization={locale:e,format:"yyyy-MM-dd",dayViewHeaderFormat:{month:"long",year:"numeric"}},tempusDominus.DefaultOptions.useCurrent=!1,tempusDominus.DefaultOptions.keepInvalid=!1;try{for(var r=[],n=new Intl.DateTimeFormat(t,{weekday:"short"}),a=0;a<7;a++){var o=new Date(2023,0,a+1);r.push(n.format(o))}for(var i=[],c=new Intl.DateTimeFormat(t,{month:"long"}),u=0;u<12;u++){var l=new Date(2023,u,1);i.push(c.format(l))}if(tempusDominus.DefaultOptions.localization.dayNames=r,tempusDominus.DefaultOptions.localization.monthNames=i,tempusDominus.DefaultOptions.localization.startOfTheWeek=["en-US","en-CA"].includes(t)?0:1,"function"==typeof window.getTranslatedText)try{tempusDominus.DefaultOptions.localization.today=window.getTranslatedText("general","today")||"Today"}catch(t){tempusDominus.DefaultOptions.localization.today="Today"}}catch(t){}}catch(t){}}}function w(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{var o=function(){try{x(t,c)}catch(t){}},i=document.getElementById(t);if(!i)return null;if("undefined"==typeof tempusDominus||!tempusDominus.TempusDominus)return null;var c=new Set(r),u=new Date;a||(a="".concat(u.getFullYear(),"-").concat(String(u.getMonth()+1).padStart(2,"0"),"-").concat(String(u.getDate()).padStart(2,"0")));var l=new tempusDominus.TempusDominus(i,{display:{inline:!0,components:{clock:!1},calendarWeeks:!1},restrictions:{minDate:n?new Date(n+"T00:00:00"):void 0,maxDate:a?new Date(a+"T23:59:59"):void 0},localization:{locale:window.getCurrentLanguage().substring(0,2),format:"L",dayViewHeaderFormat:{month:"long",year:"numeric"}},useCurrent:!1,defaultDate:e});if(!l)return null;if(x(t,c),"function"==typeof l.subscribe)try{l.subscribe(tempusDominus.Namespace.events.update,o),l.subscribe(tempusDominus.Namespace.events.change,o)}catch(t){}return l}catch(t){return null}}function b(t){if(!t.date)return null;var e=t.date.year,r=String(t.date.month+1).padStart(2,"0"),n=String(t.date.date).padStart(2,"0");return"".concat(e,"-").concat(r,"-").concat(n)}function x(t,e){var r=document.getElementById(t);r&&r.querySelectorAll(".date-container-days .day").forEach((function(t){if(t.classList.remove("highlighted"),!t.classList.contains("disabled")){var r=t.getAttribute("data-value");if(r){var n=r.split("T")[0];e.has(n)&&t.classList.add("highlighted")}}}))}},178:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"Compteur: {0}",backToDailyView:"Retour \xe0 l'aper\xe7u quotidien",clickDayInstructions:"Cliquez sur un jour pour afficher les donn\xe9es horaires",hourlyConsumption:"Consommation Horaire (kWh)",dailyConsumption:"Consommation Journali\xe8re (kWh)",hourlyData:"Donn\xe9es Horaires: {0}",dailyData:"Consommation Journali\xe8re: {0}",date:"Date:",startDate:"Date de D\xe9but",endDate:"Date de Fin",consumption:"Consommation: {0}",noDataAvailable:"Aucune donn\xe9e disponible pour cette p\xe9riode.",close:"Fermer",day:"Jour",hour:"Heure",history:{title:"Historique: {0}",hourlyData:"Consommation Horaire (Aujourd'hui)",dailyData:"Consommation Journali\xe8re (7 Derniers Jours)"},totalConsumption:"Analyses"},chartStats:{title:"Statistiques",total:"Consommation Totale",average:"Moyenne",median:"M\xe9diane",statistics:"Statistiques",averageLine:"Moyenne",medianLine:"M\xe9diane"},chartExport:{abortExport:"Annuler",processingMonth:"Traitement du mois: {current} / {total}",processingDay:"Traitement du jour: {current} / {total}",aborting:"Annulation en cours...",exportCancelled:"L'exportation PDF a \xe9t\xe9 annul\xe9e",hourlyConsumptionData:"Donn\xe9es de Consommation Horaire",dailyConsumptionData:"Donn\xe9es de Consommation Journali\xe8re",exportDropdown:"Exporter",exportingPDF:"G\xe9n\xe9ration du PDF en cours...",exportPDFWithDaily:"PDF avec valeurs horaires",exportExcelWithDaily:"Excel avec valeurs horaires",overviewSheet:"Vue d'ensemble",detailsSheet:"D\xe9tails Quotidiens",exportExcel:"Exporter vers Excel",exportPDF:"Exporter en PDF",hour:"Heure",date:"Date",consumption:"Consommation",counter:"Compteur",dataSheet:"Donn\xe9es de Consommation",errorExporting:"Erreur lors de l'exportation des donn\xe9es"},chartPDF:{pageNumbers:"Page {current} sur {total}"},totalConsumption:{menuItem:"Graphique de Consommation Totale",chartTitle:"Consommation Totale du Site",totalDailyConsumption:"Consommation Quotidienne Totale (kWh)",noDataAvailable:"Aucune donn\xe9e de consommation totale disponible pour la p\xe9riode s\xe9lectionn\xe9e.",errorLoadingChart:"Erreur lors du chargement du graphique de consommation totale."}}},240:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"Contatore: {0}",backToDailyView:"Torna alla panoramica giornaliera",clickDayInstructions:"Clicca su un giorno per visualizzare i dati orari",hourlyConsumption:"Consumo Orario (kWh)",dailyConsumption:"Consumo Giornaliero (kWh)",hourlyData:"Dati Orari: {0}",dailyData:"Consumo Giornaliero: {0}",date:"Data:",startDate:"Data di Inizio",endDate:"Data di Fine",consumption:"Consumo: {0}",noDataAvailable:"Nessun dato disponibile per questo periodo.",close:"Chiudi",day:"Giorno",hour:"Ora",history:{title:"Cronologia: {0}",hourlyData:"Consumo Orario (Oggi)",dailyData:"Consumo Giornaliero (Ultimi 7 Giorni)"},totalConsumption:"Analisi"},chartStats:{title:"Statistiche",total:"Consumo Totale",average:"Media",median:"Mediana",statistics:"Statistiche",averageLine:"Media",medianLine:"Mediana"},chartExport:{abortExport:"Interrompere",processingMonth:"Elaborazione mese: {current} / {total}",processingDay:"Elaborazione giorno: {current} / {total}",aborting:"Interruzione in corso...",exportCancelled:"L'esportazione PDF \xe8 stata annullata",hourlyConsumptionData:"Dati di Consumo Orario",dailyConsumptionData:"Dati di Consumo Giornaliero",exportDropdown:"Esporta",exportingPDF:"Generazione PDF in corso...",exportPDFWithDaily:"PDF con valori orari",exportExcelWithDaily:"Excel con valori orari",overviewSheet:"Panoramica",detailsSheet:"Dettagli Giornalieri",exportExcel:"Esporta Excel",exportPDF:"Esporta PDF",hour:"Ora",date:"Data",consumption:"Consumo",counter:"Contatore",dataSheet:"Dati di Consumo",errorExporting:"Errore durante l'esportazione dei dati"},chartPDF:{pageNumbers:"Pagina {current} di {total}"},totalConsumption:{menuItem:"Grafico dei Consumi Totali",chartTitle:"Consumo Totale del Sito",totalDailyConsumption:"Consumo Giornaliero Totale (kWh)",noDataAvailable:"Nessun dato di consumo totale disponibile per il periodo selezionato.",errorLoadingChart:"Errore nel caricamento del grafico dei consumi totali."}}},290:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"Contador: {0}",backToDailyView:"Volver a la vista diaria",clickDayInstructions:"Haga clic en un d\xeda para ver los datos por hora",hourlyConsumption:"Consumo Por Hora (kWh)",dailyConsumption:"Consumo Diario (kWh)",hourlyData:"Datos Por Hora: {0}",dailyData:"Consumo Diario: {0}",date:"Fecha:",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",consumption:"Consumo: {0}",noDataAvailable:"No hay datos disponibles para este per\xedodo.",close:"Cerrar",day:"D\xeda",hour:"Hora",history:{title:"Historial: {0}",hourlyData:"Consumo Por Hora (Hoy)",dailyData:"Consumo Diario (\xdaltimos 7 D\xedas)"},totalConsumption:"An\xe1lisis"},chartStats:{title:"Estad\xedsticas",total:"Consumo Total",average:"Promedio",median:"Mediana",statistics:"Estad\xedsticas",averageLine:"Promedio",medianLine:"Mediana"},chartExport:{abortExport:"Abortar",processingMonth:"Procesando mes: {current} / {total}",processingDay:"Procesando d\xeda: {current} / {total}",aborting:"Abortando...",exportCancelled:"La exportaci\xf3n PDF ha sido cancelada",hourlyConsumptionData:"Datos de Consumo por Hora",dailyConsumptionData:"Datos de Consumo Diario",exportDropdown:"Exportar",exportingPDF:"Generando PDF...",exportPDFWithDaily:"PDF con valores por hora",exportExcelWithDaily:"Excel con valores por hora",overviewSheet:"Resumen",detailsSheet:"Detalles Diarios",exportExcel:"Exportar Excel",exportPDF:"Exportar PDF",hour:"Hora",date:"Fecha",consumption:"Consumo",counter:"Contador",dataSheet:"Datos de Consumo",errorExporting:"Error al exportar datos"},chartPDF:{pageNumbers:"P\xe1gina {current} de {total}"},totalConsumption:{menuItem:"Gr\xe1fico de Consumo Total",chartTitle:"Consumo Total del Sitio",totalDailyConsumption:"Consumo Diario Total (kWh)",noDataAvailable:"No hay datos de consumo total disponibles para el per\xedodo seleccionado.",errorLoadingChart:"Error al cargar el gr\xe1fico de consumo total."}}},313:(t,e,r)=>{r.d(e,{Ah:()=>s,MU:()=>f,Se:()=>g,a1:()=>d,lN:()=>m,n6:()=>y,nF:()=>h,rJ:()=>p,yC:()=>v});var n=r(690);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var a=e&&e.prototype instanceof w?e:w,o=Object.create(a.prototype),c=new O(n||[]);return i(o,"_invoke",{value:L(t,r,c)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function w(){}function b(){}function x(){}var D={};d(D,u,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,u)&&(D=E);var S=x.prototype=w.prototype=Object.create(D);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,c,u){var l=h(t[o],t,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==a(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(d).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,u)}))}u(l.arg)}var o;i(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function L(e,r,n){var a=f;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=h(e,r,n);if("normal"===l.type){if(a=n.done?g:v,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=g,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return b.prototype=x,i(S,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(T.prototype),d(T.prototype,l,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new T(p(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(S),d(S,s,"Generator"),d(S,u,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){u(o,n,a,i,c,"next",t)}function c(t){u(o,n,a,i,c,"throw",t)}i(void 0)}))}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kWh";return{responsive:!0,maintainAspectRatio:!1,devicePixelRatio:window.devicePixelRatio,scales:{y:{beginAtZero:!0,title:{display:!0,text:t},grace:"5%",ticks:{callback:function(t){return window.formatNumber(t,"",window.getCurrentLanguage(),2)}}}},plugins:{tooltip:{callbacks:{label:function(t){var e=t.raw,r="";if(r=window.getTranslatedText("charts","consumption").replace("{0}",window.formatNumber(e," kWh",window.getCurrentLanguage(),2)),t.dataset&&t.dataset.counterValues&&void 0!==t.dataset.counterValues[t.dataIndex]){var n=t.dataset.counterValues[t.dataIndex];r=[r,window.getTranslatedText("charts","counterValue").replace("{0}",window.formatNumber(n," kWh",window.getCurrentLanguage(),2))]}return r}}},legend:{display:!0}}}}function d(t){t&&(t.innerHTML='\n        <div class="alert alert-info">\n            '.concat(window.getTranslatedText("charts","noDataAvailable"),"\n        </div>\n    "))}function p(t){var e=t.modalId,r=t.chartId,n=t.title,a=t.isHourly,o=t.hasParent,i=(t.minDate,t.maxDate,t.startDate),c=void 0===i?"":i,u=t.endDate,l=void 0===u?"":u,s=t.showClickInstructions,d=void 0!==s&&s,p=t.hideDatePickers,h=void 0!==p&&p,f=d?'<div class="text-end me-3 mt-1 small text-muted">\n             <i class="fa-solid fa-circle-info me-1"></i>'.concat(window.getTranslatedText("charts","clickDayInstructions"),"\n           </div>"):"",v=o?'<div class="text-center mt-3">\n             <button type="button" id="back-to-daily-btn" class="btn btn-outline-secondary" data-translation-key="charts.backToDailyView">\n                 <i class="fa-solid fa-arrow-left me-2"></i>'.concat(window.getTranslatedText("charts","backToDailyView"),"\n             </button>\n           </div>"):"",m=a||h?"":'<div class="row mb-3">\n             <div class="col-md-6">\n                 <label class="form-label text-center w-100">'.concat(window.getTranslatedText("charts","startDate"),'</label>\n                 <div id="').concat(e,'-start-datepicker" class="inline-calendar d-flex justify-content-center"></div>\n                 <input type="hidden" id="').concat(e,'-start-date" value="').concat(c,'">\n             </div>\n             <div class="col-md-6">\n                 <label class="form-label text-center w-100">').concat(window.getTranslatedText("charts","endDate"),'</label>\n                 <div id="').concat(e,'-end-datepicker" class="inline-calendar d-flex justify-content-center"></div>\n                 <input type="hidden" id="').concat(e,'-end-date" value="').concat(l,'">\n             </div>\n           </div>'),g='\n        <li><a class="dropdown-item" href="#" data-export-action="pdf" data-chart-id="'.concat(r,'" data-include-daily="false">\n            <i class="fa-solid fa-file-pdf me-2"></i>').concat(window.getTranslatedText("chartExport","exportPDF"),"\n        </a></li>\n        ").concat(a?"":'\n        <li><a class="dropdown-item" href="#" data-export-action="pdf-daily" data-chart-id="'.concat(r,'" data-include-daily="true">\n            <i class="fa-solid fa-file-pdf me-2"></i>').concat(window.getTranslatedText("chartExport","exportPDFWithDaily"),"\n        </a></li>\n        "),'\n        <li><hr class="dropdown-divider"></li>\n        <li><a class="dropdown-item" href="#" data-export-action="excel" data-chart-id="').concat(r,'" data-include-daily="false">\n            <i class="fa-solid fa-file-excel me-2"></i>').concat(window.getTranslatedText("chartExport","exportExcel"),"\n        </a></li>\n        ").concat(a?"":'\n        <li><a class="dropdown-item" href="#" data-export-action="excel-daily" data-chart-id="'.concat(r,'" data-include-daily="true">\n            <i class="fa-solid fa-file-excel me-2"></i>').concat(window.getTranslatedText("chartExport","exportExcelWithDaily"),"\n        </a></li>\n        ")),y=h&&!a?'<div class="text-center mb-3">\n            <span class="badge bg-secondary">\n                <i class="fa-regular fa-calendar me-1"></i>\n                '.concat(new Date(c).toLocaleDateString(window.getCurrentLanguage())," - \n                ").concat(new Date(l).toLocaleDateString(window.getCurrentLanguage()),"\n            </span>\n         </div>"):"";return'\n    <div class="modal fade" id="'.concat(e,'" tabindex="-1" aria-labelledby="').concat(e,'-label" aria-hidden="true">\n        <div class="modal-dialog modal-dialog-centered modal-lg">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title" id="').concat(e,'-label">').concat(n,'</h5>\n                    <div class="d-flex" style="padding: calc(var(--bs-modal-header-padding-y) * .5) calc(var(--bs-modal-header-padding-x) * .5); margin: calc(-.5 * var(--bs-modal-header-padding-y)) calc(-.5 * var(--bs-modal-header-padding-x)) calc(-.5 * var(--bs-modal-header-padding-y)) auto;">\n                        <div class="dropdown me-2">\n                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" id="').concat(e,'-export-dropdown" data-bs-toggle="dropdown" aria-expanded="false">\n                                <i class="fa-solid fa-file-export"></i> ').concat(window.getTranslatedText("chartExport","exportDropdown"),'\n                            </button>\n                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="').concat(e,'-export-dropdown">\n                                ').concat(g,'\n                            </ul>\n                        </div>\n                    </div>\n                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="padding: calc(var(--bs-modal-header-padding-y) * .5) calc(var(--bs-modal-header-padding-x) * .5);margin: 0 !important;"></button>                    \n                </div>\n                <div class="modal-body">\n                    ').concat(m,"\n                    ").concat(y,'\n                    <div class="chart-container" style="position: relative; height: 400px; max-height: 500px; overflow: hidden;">\n                        <div id="').concat(r,'" style="width: 100%; height: 100%;"></div>\n                    </div>\n                    ').concat(f,"\n                    ").concat(v,"\n                </div>\n            </div>\n        </div>\n    </div>\n    ")}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return{consumption:[],counterValues:[]};if(-1===t.zaehlerid){for(var r=[],n=0;n<24;n++){var a="usage_".concat(n.toString().padStart(2,"0"));r.push(t[a]||0)}return{consumption:r,counterValues:Array(24).fill(0)}}var o={raw:{date:t.datum,zaehlerid:t.zaehlerid,val_start:t.val_start||0,val_1:t.val_1||0,val_2:t.val_2||0,val_3:t.val_3||0,val_4:t.val_4||0,val_5:t.val_5||0,val_6:t.val_6||0,val_7:t.val_7||0,val_8:t.val_8||0,val_9:t.val_9||0,val_10:t.val_10||0,val_11:t.val_11||0,val_12:t.val_12||0,val_13:t.val_13||0,val_14:t.val_14||0,val_15:t.val_15||0,val_16:t.val_16||0,val_17:t.val_17||0,val_18:t.val_18||0,val_19:t.val_19||0,val_20:t.val_20||0,val_21:t.val_21||0,val_22:t.val_22||0,val_23:t.val_23||0,val_end:t.val_end||0},current:{isCurrentDay:!1,currentHour:-1,currentValue:0},calculated:{consumption:[],counterValues:[],lastNonZeroIndex:-1,processingSteps:[]},messstart:{provided:null!==e,date:e,hour:-1,sameDay:!1}},i=new Date,c="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0")),u=t.datum===c;o.current.isCurrentDay=u;var l={value:0,hour:-1};u&&(l=function(t){if(!t)return{value:0,hour:-1};var e=(new Date).getHours(),r=window.getChannelById(t);if(r){var n=window.decodeChannel(r);if(n&&"number"==typeof n.stand)return{value:n.stand,hour:e}}return{value:0,hour:e}}(t.zaehlerid),o.current.currentHour=l.hour,o.current.currentValue=l.value);var s=-1,d=!1;if(e&&t.datum){var p=new Date(e),h=new Date(t.datum);p.toISOString().split("T")[0]===h.toISOString().split("T")[0]&&(s=p.getHours(),d=!0,o.messstart.hour=s,o.messstart.sameDay=!0)}var f=[t.val_1||0,t.val_2||0,t.val_3||0,t.val_4||0,t.val_5||0,t.val_6||0,t.val_7||0,t.val_8||0,t.val_9||0,t.val_10||0,t.val_11||0,t.val_12||0,t.val_13||0,t.val_14||0,t.val_15||0,t.val_16||0,t.val_17||0,t.val_18||0,t.val_19||0,t.val_20||0,t.val_21||0,t.val_22||0,t.val_23||0,t.val_end||0],v=[].concat(f),m=t.val_start||0;if(d&&s>=0){for(var g=0;g<s;g++)v[g]=0;for(var y=0,w=s;w<v.length;w++)if(v[w]>0){y=v[w];break}s>0&&(m=y)}for(var b=-1,x=0;x<v.length-1;x++)v[x]>0&&(b=x);o.calculated.lastNonZeroIndex=b;for(var D=[],k=[],E=m,S=0;S<v.length;S++){var C=v[S],T={hour:S,value:C,prevValue:E,action:"",result:{consumption:0,counterValue:0}};if(u)if(S<l.hour)if(0===C&&S>0&&0!==v[S-1])D.push(0),k.push(E),T.action="past hour with missing value",T.result={consumption:0,counterValue:E};else{var L=Math.max(0,C-E);D.push(L),k.push(C),T.action="past hour with value",T.result={consumption:L,counterValue:C},0!==C&&(E=C)}else if(S===l.hour)if(l.value>0){var j=Math.max(0,l.value-E);D.push(j),k.push(l.value),T.action="current hour with live value",T.result={consumption:j,counterValue:l.value},E=l.value}else{var P=Math.max(0,C-E);D.push(P),k.push(C>0?C:E),T.action="current hour without live value",T.result={consumption:P,counterValue:C>0?C:E},0!==C&&(E=C)}else D.push(0),k.push(0),T.action="future hour",T.result={consumption:0,counterValue:0};else if(S===v.length-1&&b!==v.length-2){if(D.push(0),k.push(C),T.action="historical val_end with gap",T.result={consumption:0,counterValue:C},b>=0&&b<v.length-2){var _=b+1,O=Math.max(0,C-v[b]);D[_]=O,k[_]=v[b]+O,o.calculated.processingSteps.push({hour:_,action:"historical attribution of val_end consumption",calculation:{endValue:C,lastValidValue:v[b],consumption:O},result:{consumption:O,counterValue:v[b]+O}})}}else if(0===C)D.push(0),k.push(E),T.action="historical hour with missing value",T.result={consumption:0,counterValue:E};else{var I=Math.max(0,C-E);D.push(I),k.push(C),T.action="historical hour with value",T.result={consumption:I,counterValue:C},E=C}o.calculated.processingSteps.push(T)}o.calculated.consumption=D,o.calculated.counterValues=k;var N=D.reduce((function(t,e){return t+e}),0);return{consumption:D,counterValues:k,filteredDailyUsage:N}}function f(){return["00 - 01","01 - 02","02 - 03","03 - 04","04 - 05","05 - 06","06 - 07","07 - 08","08 - 09","09 - 10","10 - 11","11 - 12","12 - 13","13 - 14","14 - 15","15 - 16","16 - 17","17 - 18","18 - 19","19 - 20","20 - 21","21 - 22","22 - 23","23 - 24"]}function v(t){return t.map((function(t){var e=t.split("-");return"".concat(e[2],".").concat(e[1],".")}))}function m(t,e,r){return"hourly"===t?{label:window.getTranslatedText("charts","hourlyConsumption"),data:e,backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,counterValues:r}:{label:window.getTranslatedText("charts","dailyConsumption"),data:e,backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,counterValues:r}}function g(){try{var t=document.querySelector(".tools-dropdown .dropdown-menu");if(!t)return;var e=t.querySelector(".dropdown-divider");if(e){var r=document.createElement("div");r.innerHTML='\n                <li><hr class="dropdown-divider"></li>\n                <li><h6 class="dropdown-header">'.concat(window.getTranslatedText("charts","totalConsumption"),'</h6></li>\n                <li>\n                    <a class="dropdown-item" href="#" id="total-consumption-chart">\n                        <i class="fa-solid fa-chart-line"></i>\n                        <span>').concat(window.getTranslatedText("totalConsumption","menuItem"),"</span>\n                    </a>\n                </li>\n            "),e.parentNode.insertBefore(r,e)}else{var n=document.createElement("li");n.innerHTML='\n                <a class="dropdown-item" href="#" id="total-consumption-chart">\n                    <i class="fa-solid fa-chart-line"></i>\n                    <span>'.concat(window.getTranslatedText("totalConsumption","menuItem"),"</span>\n                </a>\n            "),t.appendChild(n)}var a=document.getElementById("total-consumption-chart");a&&a.addEventListener("click",(function(t){t.preventDefault(),window.showTotalConsumptionChart()}))}catch(t){}}function y(){return w.apply(this,arguments)}function w(){return(w=l(o().mark((function t(){var e,r,n,a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.$channels&&Array.isArray(window.$channels)){t.next=2;break}return t.abrupt("return");case 2:e=i(window.$channels),t.prev=3,e.s();case 5:if((r=e.n()).done){t.next=25;break}if(n=r.value,t.prev=7,(a=window.decodeChannel(n))&&a.dsid&&a.messstart){t.next=11;break}return t.abrupt("continue",23);case 11:if(c=document.getElementById("usage".concat(a.dsid))){t.next=14;break}return t.abrupt("continue",23);case 14:return t.next=16,b(a.dsid,a.messstart);case 16:t.sent?(c.style.cursor="pointer",c.setAttribute("data-has-chart-data","true")):(c.style.cursor="",c.removeAttribute("data-has-chart-data")),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(7);case 23:t.next=5;break;case 25:t.next=30;break;case 27:t.prev=27,t.t1=t.catch(3),e.e(t.t1);case 30:return t.prev=30,e.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,null,[[3,27,30,33],[7,20]])})))).apply(this,arguments)}function b(t,e){return x.apply(this,arguments)}function x(){return(x=l(o().mark((function t(e,r){var a,i,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,n.kC)(e);case 3:if((a=t.sent)&&0!==a.length){t.next=6;break}return t.abrupt("return",!1);case 6:return i=new Date(r),c="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0")),t.abrupt("return",a.some((function(t){return t>=c})));case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}},359:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"\u0160tevec: {0}",backToDailyView:"Nazaj na dnevni pregled",clickDayInstructions:"Kliknite na dan za ogled urnih podatkov",hourlyConsumption:"Urna Poraba (kWh)",dailyConsumption:"Dnevna Poraba (kWh)",hourlyData:"Urni Podatki: {0}",dailyData:"Dnevna Poraba: {0}",date:"Datum:",startDate:"Za\u010detni Datum",endDate:"Kon\u010dni Datum",consumption:"Poraba: {0}",noDataAvailable:"Za to obdobje ni na voljo podatkov.",close:"Zapri",day:"Dan",hour:"Ura",history:{title:"Zgodovina: {0}",hourlyData:"Urna Poraba (Danes)",dailyData:"Dnevna Poraba (Zadnjih 7 Dni)"},totalConsumption:"Analize"},chartStats:{title:"Statistika",total:"Skupna Poraba",average:"Povpre\u010dje",median:"Mediana",statistics:"Statistika",averageLine:"Povpre\u010dje",medianLine:"Mediana"},chartExport:{abortExport:"Prekini",processingMonth:"Obdelava meseca: {current} / {total}",processingDay:"Obdelava dneva: {current} / {total}",aborting:"Prekinjanje...",exportCancelled:"Izvoz PDF je bil preklican",hourlyConsumptionData:"Podatki o Urni Porabi",dailyConsumptionData:"Podatki o Dnevni Porabi",exportDropdown:"Izvoz",exportingPDF:"Ustvarjanje PDF-ja...",exportPDFWithDaily:"PDF z urnimi vrednostmi",exportExcelWithDaily:"Excel z urnimi vrednostmi",overviewSheet:"Pregled",detailsSheet:"Dnevni Podatki",exportExcel:"Izvoz Excel",exportPDF:"Izvoz PDF",hour:"Ura",date:"Datum",consumption:"Poraba",counter:"\u0160tevec",dataSheet:"Podatki o Porabi",errorExporting:"Napaka pri izvozu podatkov"},chartPDF:{pageNumbers:"Stran {current} od {total}"},totalConsumption:{menuItem:"Graf Skupne Porabe",chartTitle:"Skupna Poraba Lokacije",totalDailyConsumption:"Skupna Dnevna Poraba (kWh)",noDataAvailable:"Za izbrano obdobje ni na voljo podatkov o skupni porabi.",errorLoadingChart:"Napaka pri nalaganju grafa skupne porabe."}}},405:(t,e,r)=>{var n={"./charts-lang-de-DE.js":456,"./charts-lang-en-US.js":559,"./charts-lang-es-ES.js":290,"./charts-lang-fr-FR.js":178,"./charts-lang-hr-HR.js":778,"./charts-lang-it-IT.js":240,"./charts-lang-nl-NL.js":846,"./charts-lang-sl-SI.js":359};function a(t){var e=o(t);return r(e)}function o(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=o,t.exports=a,a.id=405},456:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"Z\xe4hlerstand: {0}",backToDailyView:"Zur\xfcck zur Tages\xfcbersicht",clickDayInstructions:"Klicke auf einen Tag, um st\xfcndliche Daten anzuzeigen",hourlyConsumption:"St\xfcndlicher Verbrauch (kWh)",dailyConsumption:"T\xe4glicher Verbrauch (kWh)",hourlyData:"St\xfcndliche Daten: {0}",dailyData:"T\xe4glicher Verbrauch: {0}",date:"Datum:",startDate:"Startdatum",endDate:"Enddatum",consumption:"Verbrauch: {0}",noDataAvailable:"Keine Daten f\xfcr diesen Zeitraum verf\xfcgbar.",close:"Schlie\xdfen",day:"Tag",hour:"Stunde",history:{title:"Verlauf: {0}",hourlyData:"St\xfcndlicher Verbrauch (Heute)",dailyData:"T\xe4glicher Verbrauch (Letzte 7 Tage)"},totalConsumption:"Auswertungen"},chartStats:{title:"Statistik",total:"Gesamtverbrauch",average:"Durchschnitt",median:"Median",statistics:"Statistiken",averageLine:"Durchschnitt",medianLine:"Median"},chartExport:{abortExport:"Abbrechen",processingMonth:"Verarbeitung Monat: {current} / {total}",processingDay:"Verarbeitung Tag: {current} / {total}",aborting:"Wird abgebrochen...",exportCancelled:"PDF-Export wurde abgebrochen",hourlyConsumptionData:"St\xfcndliche Verbrauchsdaten",dailyConsumptionData:"T\xe4gliche Verbrauchsdaten",exportDropdown:"Exportieren",exportingPDF:"PDF wird erstellt...",exportPDFWithDaily:"PDF mit Stundenwerten",exportExcelWithDaily:"Excel mit Stundenwerten",overviewSheet:"\xdcbersicht",detailsSheet:"Tagesdetails",exportExcel:"Excel exportieren",exportPDF:"PDF exportieren",hour:"Stunde",date:"Datum",consumption:"Verbrauch",counter:"Z\xe4hlerstand",dataSheet:"Verbrauchsdaten",errorExporting:"Fehler beim Exportieren der Daten"},chartPDF:{pageNumbers:"Seite {current} von {total}"},totalConsumption:{menuItem:"Gesamtverbrauch-Diagramm",chartTitle:"Gesamtverbrauch der Anlage",totalDailyConsumption:"T\xe4glicher Gesamtverbrauch (kWh)",noDataAvailable:"Keine Gesamtverbrauchsdaten f\xfcr den ausgew\xe4hlten Zeitraum verf\xfcgbar.",errorLoadingChart:"Fehler beim Laden des Gesamtverbrauch-Diagramms."}}},559:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"Counter: {0}",backToDailyView:"Back to Daily Overview",clickDayInstructions:"Click on a day to view hourly data",hourlyConsumption:"Hourly Consumption (kWh)",dailyConsumption:"Daily Consumption (kWh)",hourlyData:"Hourly Data: {0}",dailyData:"Daily Consumption: {0}",date:"Date:",startDate:"Start Date",endDate:"End Date",consumption:"Consumption: {0}",noDataAvailable:"No data available for this date range.",close:"Close",day:"Day",hour:"Hour",history:{title:"History: {0}",hourlyData:"Hourly Consumption (Today)",dailyData:"Daily Consumption (Last 7 Days)"},totalConsumption:"Analysis"},chartStats:{title:"Statistics",total:"Total Consumption",average:"Average",median:"Median",statistics:"Statistics",averageLine:"Average",medianLine:"Median"},chartExport:{abortExport:"Abort",processingMonth:"Processing month: {current} / {total}",processingDay:"Processing day: {current} / {total}",aborting:"Aborting...",exportCancelled:"PDF export was cancelled",hourlyConsumptionData:"Hourly Consumption Data",dailyConsumptionData:"Daily Consumption Data",exportDropdown:"Export",exportingPDF:"Generating PDF...",exportPDFWithDaily:"PDF with hourly values",exportExcelWithDaily:"Excel with hourly values",overviewSheet:"Overview",detailsSheet:"Daily Details",exportExcel:"Export Excel",exportPDF:"Export PDF",hour:"Hour",date:"Date",consumption:"Consumption",counter:"Counter",dataSheet:"Consumption Data",errorExporting:"Error exporting data"},chartPDF:{pageNumbers:"Page {current} of {total}"},totalConsumption:{menuItem:"Total Consumption Chart",chartTitle:"Total Site Consumption",totalDailyConsumption:"Total Daily Consumption (kWh)",noDataAvailable:"No total consumption data available for the selected period.",errorLoadingChart:"Error loading total consumption chart."}}},618:(t,e,r)=>{r.d(e,{j:()=>dt,C:()=>lt});var n=r(690);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t){if(!t||0===t.length)return{total:0,average:0,median:0};var e=t.filter((function(t){return null!=t&&!isNaN(t)}));if(0===e.length)return{total:0,average:0,median:0};var r,n,o=e.reduce((function(t,e){return t+e}),0),i=o/e.length,c=(n=e,function(t){if(Array.isArray(t))return a(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(t,e){return t-e}));if(c.length%2==0){var u=c.length/2;r=(c[u-1]+c[u])/2}else r=c[Math.floor(c.length/2)];return{total:o,average:i,median:r}}function i(t,e){return{averageLine:{type:"line",label:window.getTranslatedText("chartStats","averageLine"),data:Array(e).fill(t.average),borderColor:"rgba(255, 99, 132, 1)",borderWidth:1.5,borderDash:[5,5],pointRadius:0,fill:!1,tension:0}}}var c=r(313);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new O(n||[]);return a(i,"_invoke",{value:L(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function w(){}function b(){}function x(){}var D={};d(D,i,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,i)&&(D=E);var S=x.prototype=w.prototype=Object.create(D);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(a,o,i,c){var l=h(t[a],t,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==u(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(d).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function L(e,r,n){var a=f;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=h(e,r,n);if("normal"===l.type){if(a=n.done?g:v,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=g,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(u(e)+" is not iterable")}return b.prototype=x,a(S,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(T.prototype),d(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new T(p(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(S),d(S,s,"Generator"),d(S,i,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=d(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){h(o,n,a,i,c,"next",t)}function c(t){h(o,n,a,i,c,"throw",t)}i(void 0)}))}}var v=!1,m=0;function g(t,e,r,n){return y.apply(this,arguments)}function y(){return y=f(l().mark((function t(e,r,n,a){var o,i,c,u,s,p,h,f,y,b,k,E,S,T,L,j,_,I,F,A,z,M,G,V,W,B,H,U,R,Y,K,Z,q,X,J,$,Q,tt,et,rt,nt,at,ot,it,ct,ut,lt,st,dt,pt,ht,ft,vt,mt,gt,yt=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=yt.length>4&&void 0!==yt[4]?yt[4]:"kWh",i=yt.length>5&&void 0!==yt[5]&&yt[5],c=yt.length>6&&void 0!==yt[6]?yt[6]:null,t.prev=3,"undefined"!=typeof jspdf||"undefined"!=typeof jsPDF){t.next=8;break}return C((function(){setTimeout((function(){return g(e,r,n,a,o)}),1e3)})),t.abrupt("return");case 8:if(v=!1,m=0,(u=document.createElement("div")).style.position="fixed",u.style.top="0",u.style.left="0",u.style.width="100%",u.style.height="100%",u.style.backgroundColor="rgba(0,0,0,0.5)",u.style.display="flex",u.style.justifyContent="center",u.style.alignItems="center",u.style.zIndex="9999",u.innerHTML='\n            <div style="background: white; padding: 20px; border-radius: 5px; text-align: center; min-width: 300px;">\n                <div><i class="fa-solid fa-spinner fa-spin fa-2x"></i></div>\n                <div style="margin-top: 10px;">'.concat(window.getTranslatedText("chartExport","exportingPDF")||"Generating PDF...",'</div>\n                <div id="pdf-export-month-progress-container" style="margin-top: 15px; display: none;">\n                    <div class="progress" style="height: 10px;">\n                        <div id="pdf-export-month-progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" \n                            aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <div id="pdf-export-month-progress-text" style="margin-top: 5px; font-size: 0.8em;">\n                        <span id="pdf-export-month-current">0</span> / <span id="pdf-export-month-total">0</span>\n                    </div>\n                </div>\n                <div id="pdf-export-progress-container" style="margin-top: 15px; display: none;">\n                    <div class="progress" style="height: 10px;">\n                        <div id="pdf-export-progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" \n                            aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    <div id="pdf-export-progress-text" style="margin-top: 5px; font-size: 0.8em;">\n                        <span id="pdf-export-progress-type"></span>: <span id="pdf-export-current">0</span> / <span id="pdf-export-total">0</span>\n                    </div>\n                </div>\n                <div style="margin-top: 15px;">\n                    <button id="pdf-export-abort-btn" class="btn btn-sm btn-outline-secondary">\n                        <i class="fa-solid fa-times me-1"></i>').concat(window.getTranslatedText("chartExport","abortExport")||"Abort","\n                    </button>\n                </div>\n            </div>\n        "),document.body.appendChild(u),(s=document.getElementById("pdf-export-abort-btn"))&&s.addEventListener("click",(function(){v=!0,s.disabled=!0,s.innerHTML='<i class="fa-solid fa-spinner fa-spin me-1"></i>'.concat(window.getTranslatedText("chartExport","aborting")||"Aborting...")})),p=function(t){"Escape"===t.key&&(v=!0,s&&(s.disabled=!0,s.innerHTML='<i class="fa-solid fa-spinner fa-spin me-1"></i>'.concat(window.getTranslatedText("chartExport","aborting")||"Aborting...")))},document.addEventListener("keydown",p),h="undefined"!=typeof jspdf?jspdf.jsPDF:jsPDF,f=e.data.labels||[],y=e.data.datasets||[],b=y.length>0?y[0]:{data:[]},k=b.data||[],E=b.counterValues||[],S=e.data.rawDates||[],T="hourly"===a,L=e.zaehlerid||null,j="",(_=-1===L)?j=_?window.getTranslatedText("totalConsumption","chartTitle"):channel?channel.beschreibung:"Unknown":(I=window.decodeChannel(window.getChannelById(L)),j=I.beschreibung),F=0,A=new Set,z={},!T&&S&&S.length>0&&(F=S.length,S.forEach((function(t,e){var r=t.split("-"),n="".concat(r[0],"-").concat(r[1]);A.add(n),z[n]||(z[n]=[]),z[n].push({date:t,label:f[e],consumption:k[e]||0,counter:E[e]||0})}))),G=new h({orientation:M=F>14?"landscape":"portrait",compress:!0}),V=document.getElementById("sitename").innerHTML,G.setProperties({title:j,subject:window.getTranslatedText("chartExport","hourly"===a?"hourlyConsumptionData":"dailyConsumptionData"),author:V,creator:"CTOOLS.io",compress:!0}),W=G.internal.pageSize.getWidth(),B=G.internal.pageSize.getHeight(),H=15,!(A.size>1&&F>31)){t.next=83;break}N(0,U=Object.keys(z).length),R=0,Y=Object.entries(z);case 54:if(!(R<Y.length)){t.next=81;break}if(l=Y[R],K=function(t){if(Array.isArray(t))return t}(l)||function(t){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,n,a,o,i=[],c=!0,u=!1;try{for(a=(e=e.call(t)).next,!2;!(c=(r=a.call(e)).done)&&(i.push(r.value),2!==i.length);c=!0);}catch(t){u=!0,n=t}finally{try{if(!c&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw n}}return i}}(l)||d(l,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),Z=K[0],q=K[1],N(++m,U),!v){t.next=61;break}return t.abrupt("break",81);case 61:return Z!==Object.keys(z)[0]&&(G.addPage(M),H=15),X=new Date(Z+"-01"),J=X.toLocaleDateString(window.getCurrentLanguage(),{month:"long",year:"numeric"}),G.setFontSize(16),G.text("".concat(j," - ").concat(J),W/2,H,{align:"center"}),H+=10,t.next=69,w(G,q,H,W,M,o);case 69:if(H=t.sent,"function"==typeof G.autoTable?($=q.map((function(t){return{label:t.label,consumption:window.formatNumber(t.consumption||0,"",window.getCurrentLanguage(),2),counter:window.formatNumber(t.counter||0,"",window.getCurrentLanguage(),2)}})),Q=[{header:window.getTranslatedText("chartExport","date"),dataKey:"label"},{header:"".concat(window.getTranslatedText("chartExport","consumption")," (").concat(o,")"),dataKey:"consumption"},{header:"".concat(window.getTranslatedText("chartExport","counter")," (").concat(o,")"),dataKey:"counter"}],G.autoTable({startY:H,columns:Q,body:$,margin:{left:20,right:20},theme:"grid",headStyles:{fillColor:[0,118,168],textColor:255,fontSize:9},bodyStyles:{fontSize:9},alternateRowStyles:{fillColor:[245,245,245]}})):G.text("Data table could not be generated - autoTable plugin not available",20,H),T||!i){t.next=78;break}if(tt=q.map((function(t){return t.date})),!v){t.next=76;break}return t.abrupt("break",81);case 76:return t.next=78,D(G,tt,j,o,L,c);case 78:R++,t.next=54;break;case 81:t.next=102;break;case 83:if("daily"===a?et=P(f):e&&e.chartDate?(rt=new Date(e.chartDate),et=rt.toLocaleDateString(window.getCurrentLanguage())):et=(new Date).toLocaleDateString(window.getCurrentLanguage()),G.setFontSize(16),G.text(j,W/2,H,{align:"center"}),H+=8,G.setFontSize(12),G.text("".concat("hourly"===a?window.getTranslatedText("charts","hourlyData").replace("{0}",""):window.getTranslatedText("charts","dailyData").replace("{0}","")," ").concat(et),W/2,H,{align:"center"}),H+=10,nt=e.canvas,at=nt.toDataURL("image/png",1),ot=nt.width/nt.height,"portrait"===M?ct=(it=W-40)/ot:(it=W-40,ct=Math.min(it/ot,110)),G.addImage(at,"PNG",20,H,it,ct,"","FAST"),H+=ct+15,!T&&F>14&&(G.addPage(M),H=15,G.setFontSize(14),G.text("".concat(j," - ").concat(window.getTranslatedText("chartExport","detailsSheet")),W/2,H,{align:"center"}),H+=10),ut=x(f,k,E,T,S),"function"==typeof G.autoTable?(lt=[{header:T?window.getTranslatedText("chartExport","hour"):window.getTranslatedText("chartExport","date"),dataKey:"label"},{header:"".concat(window.getTranslatedText("chartExport","consumption")," (").concat(o,")"),dataKey:"consumption"},{header:"".concat(window.getTranslatedText("chartExport","counter")," (").concat(o,")"),dataKey:"counter"}],G.autoTable({startY:H,columns:lt,body:ut,margin:{left:20,right:20},theme:"grid",headStyles:{fillColor:[0,118,168],textColor:255,fontSize:9},bodyStyles:{fontSize:9},alternateRowStyles:{fillColor:[245,245,245]}}),H=G.previousAutoTable.finalY+10):(G.text("Data table could not be generated - autoTable plugin not available",20,H),H+=10,C()),T||!i){t.next=102;break}return t.next=102,D(G,S,j,o,L,c);case 102:for(st=G.internal.getNumberOfPages(),dt=new Date,pt=window.getCurrentLanguage(),ht=1;ht<=st;ht++)G.setPage(ht),G.setFontSize(8),G.text(V,20,B-10,{align:"left"}),ft=dt.toLocaleDateString(pt,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),vt=(vt=window.getTranslatedText("chartPDF","pageNumbers")).replace("{current}",ht).replace("{total}",st),G.text("CTOOLS.io - ".concat(ft," - ").concat(vt),W-20,B-10,{align:"right"});mt=O(j,window.formatDate(new Date,"date"),"pdf"),G.save(mt),u&&(document.removeEventListener("keydown",p),document.body.removeChild(u)),t.next=116;break;case 111:t.prev=111,t.t0=t.catch(3),v||window.getTranslatedText("chartExport","errorExporting"),(gt=document.querySelector('div[style*="rgba(0,0,0,0.5)"]'))&&(document.removeEventListener("keydown",keyHandler),document.body.removeChild(gt));case 116:case"end":return t.stop()}var l}),t,null,[[3,111]])}))),y.apply(this,arguments)}function w(t,e,r,n,a){return b.apply(this,arguments)}function b(){return b=f(l().mark((function t(e,r,n,a,i){var c,u=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=u.length>5&&void 0!==u[5]?u[5]:"kWh",t.abrupt("return",new Promise((function(t,i){try{var u=r.map((function(t){return t.label})),l=r.map((function(t){return t.consumption})),s=r.map((function(t){return t.counter})),d=document.createElement("canvas");d.width=800,d.height=400,document.body.appendChild(d);var p={labels:u,datasets:[{label:window.getTranslatedText("charts","dailyConsumption"),data:l,backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,counterValues:s}]},h=o(l),f=window.formatNumber(h.total," kWh",window.getCurrentLanguage(),2),v=window.formatNumber(h.average," kWh",window.getCurrentLanguage(),2),m=window.getTranslatedText("chartStats","total"),g=window.getTranslatedText("charts","day"),y="".concat(f," ").concat(m," - \xd8 ").concat(v," / ").concat(g);h.average>0&&p.datasets.push({type:"line",label:window.getTranslatedText("chartStats","averageLine"),data:Array(l.length).fill(h.average),borderColor:"rgba(255, 99, 132, 1)",borderWidth:1.5,borderDash:[5,5],pointRadius:0,fill:!1,tension:0}),new Chart(d.getContext("2d"),{type:"bar",data:p,options:{responsive:!0,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0,title:{display:!0,text:c},ticks:{callback:function(t){return window.formatNumber(t,"",window.getCurrentLanguage(),2)}}}},plugins:{legend:{display:!0,position:"top"},title:{display:!0,position:"bottom",text:y}},animation:{duration:0}}}),setTimeout((function(){try{var r,o,i=d.toDataURL("image/png");o=(r=a-40)*(d.height/d.width),e.addImage(i,"PNG",20,n,r,o),document.body.removeChild(d),t(n+o+10)}catch(r){e.setFontSize(10),e.text("Error generating monthly chart",20,n+10),document.body.contains(d)&&document.body.removeChild(d),t(n+20)}}),500)}catch(r){e.setFontSize(10),e.text("Error generating monthly chart",20,n+10),t(n+20)}})));case 2:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function x(t,e,r,n,a){var o=window.getCurrentLanguage(),i=[];return n?t.forEach((function(t,n){n<e.length&&i.push({label:t,consumption:window.formatNumber(e[n]||0,"",o,2),counter:window.formatNumber(r[n]||0,"",o,2)})})):t.forEach((function(t,n){if(n<e.length){var c=_(t,a?a[n]:null);i.push({label:c,consumption:window.formatNumber(e[n]||0,"",o,2),counter:window.formatNumber(r[n]||0,"",o,2)})}})),i}function D(t,e,r,n){return k.apply(this,arguments)}function k(){return k=f(l().mark((function t(e,r,n,a){var o,i,u,d,p,h,f,m,g,y,w,b,x,D,k=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=k.length>5&&void 0!==k[5]?k[5]:null,o=k.length>4&&void 0!==k[4]?k[4]:null){t.next=4;break}return t.abrupt("return");case 4:return u=document.getElementById("pdf-export-progress-container"),d=document.getElementById("pdf-export-progress-bar"),p=document.getElementById("pdf-export-current"),h=document.getElementById("pdf-export-total"),u&&d&&p&&h&&(u.style.display="block",h.textContent=r.length,p.textContent="0",d.style.width="0%",d.setAttribute("aria-valuenow","0")),f={},t.prev=10,t.next=13,L(r,n,o,i);case 13:f=t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(10);case 19:m=0,g=0,y=!1,w=s(r),t.prev=23,x=l().mark((function t(){var o,u,s,d,p,h,w,x,D,k,S;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=b.value,!v){t.next=4;break}return t.abrupt("return",0);case 4:if(u=f[o]){t.next=10;break}return I(++m,r.length),t.abrupt("return",1);case 10:return t.prev=10,e.addPage("portrait"),s=new Date(o).toLocaleDateString(window.getCurrentLanguage()),e.setFontSize(14),e.text("".concat(n," - ").concat(s),e.internal.pageSize.getWidth()/2,15,{align:"center"}),d=(0,c.nF)(u),p=d.consumption,h=d.counterValues,w=(0,c.MU)(),t.next=19,E(e,u,20,e.internal.pageSize.getWidth(),a,i);case 19:x=t.sent,D=w.map((function(t,e){return{label:t,consumption:window.formatNumber(p[e]||"0","",window.getCurrentLanguage(),2),counter:p[e]&&h[e]?window.formatNumber(h[e],"",window.getCurrentLanguage(),2):""}})),k=[{header:window.getTranslatedText("chartExport","hour"),dataKey:"label"},{header:"".concat(window.getTranslatedText("chartExport","consumption")," (").concat(a,")"),dataKey:"consumption"},{header:"".concat(window.getTranslatedText("chartExport","counter")," (").concat(a,")"),dataKey:"counter"}],"function"==typeof e.autoTable?(S=new Date(o).toLocaleDateString(window.getCurrentLanguage(),{year:"numeric",month:"numeric",day:"numeric"}),(y=e.internal.pageSize.getWidth()>e.internal.pageSize.getHeight())?g=9:(x-=40,g=8),e.autoTable({startY:x+10,columns:k,body:D,margin:{left:20,right:20},theme:"grid",headStyles:{fillColor:[0,118,168],textColor:255,fontSize:g},bodyStyles:{fontSize:g},alternateRowStyles:{fillColor:[245,245,245]},didDrawPage:function(t){var r=e.internal.pageSize.getWidth();y&&(e.setFont(void 0,"normal"),e.setFontSize(10),e.setTextColor(0,0,0),e.text("".concat(n," - ").concat(S),r/2,10,{align:"center"}))}})):e.text("Hourly data table could not be generated",20,50),I(++m,r.length),t.next=33;break;case 27:return t.prev=27,t.t0=t.catch(10),I(++m,r.length),t.abrupt("return",1);case 33:case"end":return t.stop()}}),t,null,[[10,27]])})),w.s();case 26:if((b=w.n()).done){t.next=35;break}return t.delegateYield(x(),"t1",28);case 28:if(0!==(D=t.t1)){t.next=31;break}return t.abrupt("break",35);case 31:if(1!==D){t.next=33;break}return t.abrupt("continue",33);case 33:t.next=26;break;case 35:t.next=40;break;case 37:t.prev=37,t.t2=t.catch(23),w.e(t.t2);case 40:return t.prev=40,w.f(),t.finish(40);case 43:case"end":return t.stop()}}),t,null,[[10,16],[23,37,40,43]])}))),k.apply(this,arguments)}function E(t,e,r,n){return S.apply(this,arguments)}function S(){return S=f(l().mark((function t(e,r,n,a){var i,u,s=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>4&&void 0!==s[4]?s[4]:"kWh",u=s.length>5&&void 0!==s[5]?s[5]:null,t.abrupt("return",new Promise((function(t,l){try{var s=(0,c.nF)(r,u),d=s.consumption,p=s.counterValues,h=(0,c.MU)(),f=document.createElement("canvas");f.width=800,f.height=400,document.body.appendChild(f);var v={labels:h,datasets:[{label:window.getTranslatedText("charts","hourlyConsumption"),data:d,backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,counterValues:p}]},m=o(d),g=window.formatNumber(m.total," kWh",window.getCurrentLanguage(),2),y=window.formatNumber(m.average," kWh",window.getCurrentLanguage(),2),w=window.getTranslatedText("chartStats","total"),b=window.getTranslatedText("charts","hour"),x="".concat(g," ").concat(w," - \xd8 ").concat(y," / ").concat(b);m.average>0&&v.datasets.push({type:"line",label:window.getTranslatedText("chartStats","averageLine"),data:Array(d.length).fill(m.average),borderColor:"rgba(255, 99, 132, 1)",borderWidth:1.5,borderDash:[5,5],pointRadius:0,fill:!1,tension:0}),new Chart(f.getContext("2d"),{type:"bar",data:v,options:{responsive:!0,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0,title:{display:!0,text:i},ticks:{font:{size:44},callback:function(t){return window.formatNumber(t,"",window.getCurrentLanguage(),2)}}},x:{ticks:{font:{size:44}}}},plugins:{legend:{display:!0,position:"top",labels:{font:{size:44}}},title:{display:!0,position:"bottom",text:x,font:{size:44}}},animation:{duration:0}}}),setTimeout((function(){try{var r=f.toDataURL("image/png"),o=a-40,i=o*(f.height/f.width);e.addImage(r,"PNG",20,n,o,i,"","FAST"),document.body.removeChild(f),t(n+i+10+25)}catch(r){e.setFontSize(10),e.text("Error generating hourly chart",20,n+10),document.body.contains(f)&&document.body.removeChild(f),t(n+20)}}),500)}catch(r){e.setFontSize(10),e.text("Error generating hourly chart",20,n+10),t(n+20)}})));case 3:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function C(t){var e=0,r=function(){++e>=2&&"function"==typeof t&&t()};if(void 0===window.jspdf&&void 0===window.jsPDF){var n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",n.onload=r,document.head.appendChild(n)}else r();var a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js",a.onload=r,document.head.appendChild(a)}function T(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"kWh",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;try{var u,l=t.labels||[],s=t.datasets||[],d=s.length>0?s[0]:{data:[]},p=d.data||[],h=d.counterValues||[],f=window.getCurrentLanguage(),v="";if(-1===o.zaehlerid)v=window.getTranslatedText("totalConsumption","chartTitle");else{var m=window.decodeChannel(window.getChannelById(o.zaehlerid));v=m&&m.beschreibung||""}if("daily"===r)u=P(l,t.rawDates);else if(o&&o.chartDate){var g=new Date(o.chartDate);u=g.toLocaleDateString(window.getCurrentLanguage())}else u=(new Date).toLocaleDateString(window.getCurrentLanguage());var y=XLSX.utils.book_new(),w=[];if(w.push(["".concat(v," - ").concat("hourly"===r?window.getTranslatedText("charts","hourlyData").replace("{0}",""):window.getTranslatedText("charts","dailyData").replace("{0}",""))]),w.push(["".concat(u)]),w.push([]),"hourly"===r)w.push([window.getTranslatedText("chartExport","hour"),"".concat(window.getTranslatedText("chartExport","consumption")," (").concat(n,")"),"".concat(window.getTranslatedText("chartExport","counter")," (").concat(n,")")]),l.forEach((function(t,e){e<p.length&&w.push([t,window.formatNumber(p[e]||0,"",window.getCurrentLanguage(),3),window.formatNumber(h[e]||0,"",window.getCurrentLanguage(),3)])}));else{w.push([window.getTranslatedText("chartExport","date"),"".concat(window.getTranslatedText("chartExport","consumption")," (").concat(n,")"),"".concat(window.getTranslatedText("chartExport","counter")," (").concat(n,")")]);var b=t.rawDates||[];l.forEach((function(t,e){if(e<p.length){var r,n=b[e]||null;r=n?new Date(n).toLocaleDateString(f,{year:"numeric",month:"2-digit",day:"2-digit"}):_(t,null),w.push([r,window.formatNumber(p[e]||0,"",f,3),window.formatNumber(h[e]||0,"",f,3)])}}))}w.push([]),w.push([window.getTranslatedText("chartStats","statistics")]),w.push(["".concat(window.getTranslatedText("chartStats","total")," (").concat(n,")"),window.formatNumber(e.total||0,"",f,3)]),w.push(["".concat(window.getTranslatedText("chartStats","average")," (").concat(n,")"),window.formatNumber(e.average||0,"",f,3)]);var x=XLSX.utils.aoa_to_sheet(w);if(x["!cols"]=[{wch:18},{wch:18},{wch:18}],XLSX.utils.book_append_sheet(y,x,window.getTranslatedText("chartExport","overviewSheet")),"daily"===r&&t.rawDates&&t.rawDates.length>0&&a)return void L(t.rawDates,v,o.zaehlerid,i).then((function(t){!function(t,e,r,n,a){if(0!==Object.keys(e).length){var o=[];o.push(["".concat(r," - ").concat(window.getTranslatedText("chartExport","detailsSheet"))]),o.push([]);var i=Object.keys(e).sort(),u=[window.getTranslatedText("chartExport","hour")];i.forEach((function(t){var e=_("",t);u.push(e)})),o.push(u),(0,c.MU)().forEach((function(t,r){var n=[t];if(i.length>0&&0===r){var u=i[0];e[u]}i.forEach((function(t){var o=e[t],i=null;if(o)try{var u;if("function"==typeof c.nF)(u=(0,c.nF)(o,a))&&u.consumption&&void 0!==u.consumption[r]&&(i=u.consumption[r]);else{var l="val_".concat(r+1),s=0===r?"val_start":"val_".concat(r);void 0!==o[l]&&void 0!==o[s]&&(i=o[l]-o[s])<0&&(i=0)}}catch(t){}if(null!=i){var d="function"==typeof window.formatNumber?window.formatNumber(i,"",window.getCurrentLanguage(),2):i.toFixed(2);n.push(d)}else n.push("")})),o.push(n)}));for(var l=XLSX.utils.aoa_to_sheet(o),s=[{wch:15}],d=0;d<i.length;d++)s.push({wch:15});l["!cols"]=s,XLSX.utils.book_append_sheet(t,l,window.getTranslatedText("chartExport","detailsSheet"))}}(y,t,v,0,i);var e=O(v,u,"xlsx");XLSX.writeFile(y,e)})).catch((function(t){"".concat(window.getTranslatedText("chartExport","errorExporting")," (details): ").concat(t.message);var e=O(v,u,"xlsx");XLSX.writeFile(y,e)}));new Date;var D=O(v,u,"xlsx");XLSX.writeFile(y,D)}catch(t){window.getTranslatedText("chartExport","errorExporting")}}function L(t,e){return j.apply(this,arguments)}function j(){return j=f(l().mark((function t(e,r){var a,o,i,c,u,h,v,m,g,y,w,b=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=b.length>3&&void 0!==b[3]?b[3]:null,a=b.length>2&&void 0!==b[2]?b[2]:null){t.next=4;break}throw new Error("Could not determine channel ID from name");case 4:if(i={},e&&0!==e.length){t.next=7;break}return t.abrupt("return",i);case 7:return t.prev=7,c=(r=e,function(t){if(Array.isArray(t))return p(t)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||d(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort(),u=c[0],h=c[c.length-1],t.next=14,(0,n.wi)(u,h,a,o);case 14:(v=t.sent).length,m=s(v);try{for(m.s();!(g=m.n()).done;)(y=g.value).datum&&e.includes(y.datum)&&(i[y.datum]=y)}catch(t){m.e(t)}finally{m.f()}if(Object.keys(i),!((w=e.filter((function(t){return!i[t]}))).length>0)){t.next=26;break}return t.next=26,Promise.all(w.map(function(){var t=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,n.tZ)(a,e,o);case 3:(r=t.sent)&&(i[e]=r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()));case 26:t.next=33;break;case 28:return t.prev=28,t.t0=t.catch(7),t.next=33,Promise.all(e.map(function(){var t=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,n.tZ)(a,e,o);case 3:(r=t.sent)&&(i[e]=r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()));case 33:return t.abrupt("return",i);case 35:case"end":return t.stop()}var r}),t,null,[[7,28]])}))),j.apply(this,arguments)}function P(t){if(!t||0===t.length)return window.formatDate(new Date,"date");if(1===t.length)return _(t[0]);var e=_(t[0]),r=_(t[t.length-1]);return"".concat(e," - ").concat(r)}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){var r=e.split("-"),n=r[0],a=r[1],o=r[2],i=window.getCurrentLanguage();return new Date(n,a-1,o).toLocaleDateString(i)}var c=t.match(/(\d{1,2})\.(\d{1,2})\.?/);if(c&&c.length>=3){var u=parseInt(c[1],10),l=parseInt(c[2],10)-1,s=(new Date).getFullYear(),d=window.getCurrentLanguage();return new Date(s,l,u).toLocaleDateString(d)}return t}function O(t,e,r){t||(t="channel_data"),e||(e=window.formatDate(new Date,"date")),r||(r="txt");var n=[t,e].map((function(t){return t.replace(/[\\/:*?"<>|]+/g,"_").replace(/\s+/g,"_")})).join("_"),a=r.replace(/^\./,"");return"".concat(n,".").concat(a)}function I(t,e){var r=document.getElementById("pdf-export-progress-container"),n=document.getElementById("pdf-export-progress-bar"),a=document.getElementById("pdf-export-current"),o=document.getElementById("pdf-export-total"),i=document.getElementById("pdf-export-progress-text"),c=document.getElementById("pdf-export-progress-type");if(r&&n&&a&&o){if(r.style.display="block",c&&(c.textContent=window.getTranslatedText("chartExport","processingDay")||"Processing day"),i){var u=window.getTranslatedText("chartExport","processingDay")||"Processing day: {current} / {total}";i.innerHTML=u.replace("{current}",'<span id="pdf-export-current">'.concat(t,"</span>")).replace("{total}",'<span id="pdf-export-total">'.concat(e,"</span>"))}else a.textContent=t,o.textContent=e;var l=Math.round(t/e*100);n.style.width="".concat(l,"%"),n.setAttribute("aria-valuenow",l)}}function N(t,e){var r=document.getElementById("pdf-export-month-progress-container"),n=document.getElementById("pdf-export-month-progress-bar"),a=document.getElementById("pdf-export-month-current"),o=document.getElementById("pdf-export-month-total"),i=document.getElementById("pdf-export-month-progress-text");if(r&&n&&a&&o){if(r.style.display="block",i){var c=window.getTranslatedText("chartExport","processingMonth")||"Processing month: {current} / {total}";i.innerHTML=c.replace("{current}",'<span id="pdf-export-month-current">'.concat(t,"</span>")).replace("{total}",'<span id="pdf-export-month-total">'.concat(e,"</span>"))}else a.textContent=t,o.textContent=e;var u=Math.round(t/e*100);n.style.width="".concat(u,"%"),n.setAttribute("aria-valuenow",u)}}var F=r(121);function A(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=W(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function z(){z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:C(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",f="executing",v="completed",m={};function g(){}function y(){}function w(){}var b={};l(b,i,(function(){return this}));var x=Object.getPrototypeOf,D=x&&x(x(_([])));D&&D!==r&&n.call(D,i)&&(b=D);var k=w.prototype=g.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(a,o,i,c){var u=d(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==H(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function C(e,r,n){var a=p;return function(o,i){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=d(e,r,n);if("normal"===l.type){if(a=n.done?v:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=v,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function _(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(H(e)+" is not iterable")}return y.prototype=w,a(k,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:y,configurable:!0}),y.displayName=l(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new S(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(k),l(k,u,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;j(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){V(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function V(t,e,r){return(e=function(t){var e=function(t){if("object"!=H(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W(t,e){if(t){if("string"==typeof t)return B(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function U(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function R(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){U(o,n,a,i,c,"next",t)}function c(t){U(o,n,a,i,c,"throw",t)}i(void 0)}))}}var Y={},K={},Z={};function q(){return q=R(z().mark((function t(e,a,u){var l,s,d,p,h,f,v,m,g,y,w,b,x,D,k,E,S,C,T,L,j,P,_=arguments;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=_.length>3&&void 0!==_[3]?_[3]:null,t.prev=1,"undefined"!=typeof Chart){t.next=12;break}return t.next=5,Promise.resolve().then(r.bind(r,121));case 5:return s=t.sent,d=s.loadChartJs,t.next=9,d();case 9:if(t.sent){t.next=12;break}throw new Error("Failed to load Chart.js");case 12:if(p=document.getElementById(e)){t.next=16;break}return t.abrupt("return",null);case 16:if(null!=a){t.next=18;break}throw new Error("zaehlerid must be provided");case 18:if(h=Number(a),!isNaN(h)){t.next=22;break}throw new Error("Invalid zaehlerid: ".concat(a));case 22:if(-1!==h){t.next=29;break}return t.next=26,(0,n.WL)(u);case 26:f=t.sent,t.next=33;break;case 29:return t.next=32,(0,n.tZ)(a,u,l);case 32:f=t.sent;case 33:if(f){t.next=37;break}return(0,c.a1)(p),t.abrupt("return",null);case 37:return v=(0,c.MU)(),m=(0,c.nF)(f,l),g=m.consumption,y=m.counterValues,w=m.filteredDailyUsage,b=o(g),l&&void 0!==w&&(b.total=w),x=window.formatNumber(b.total," kWh",window.getCurrentLanguage(),2),D=window.formatNumber(b.average," kWh",window.getCurrentLanguage(),2),k=window.getTranslatedText("chartStats","total"),E=window.getTranslatedText("charts","hour"),S="".concat(x," ").concat(k," - \xd8 ").concat(D," / ").concat(E),p.innerHTML='\n            <canvas id="'.concat(e,'-canvas"></canvas>\n        '),C=document.getElementById("".concat(e,"-canvas")),T={labels:v,datasets:[(0,c.lN)("hourly",g,y)]},b.average>0&&(L=i(b,g.length),T.datasets.push(L.averageLine)),K[e]=T,Z[e]=b,j=C.getContext("2d"),P=new Chart(j,{type:"bar",data:T,options:G(G({},(0,c.Ah)()),{},{responsive:!0,plugins:G(G({},(0,c.Ah)().plugins),{},{title:{display:!0,position:"bottom",text:S}}),layout:{padding:{top:10,right:25,bottom:10,left:10}},animation:{duration:0},resizeDelay:0})}),Y[e]=P,P.zaehlerid=a,P.chartDate=u,P.messstartDate=l,t.abrupt("return",P);case 61:return t.prev=61,t.t0=t.catch(1),t.abrupt("return",null);case 65:case"end":return t.stop()}}),t,null,[[1,61]])}))),q.apply(this,arguments)}function X(t,e,r,n){return J.apply(this,arguments)}function J(){return J=R(z().mark((function t(e,a,u,l){var s,d,p,h,f,v,m,g,y,w,b,x,D,k,E,S,C,T,L,j,P,_,O,I,N,F,M,V,W,B,H,U,R,q,X,J,$,Q=arguments;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Q.length>4&&void 0!==Q[4]?Q[4]:[],d=Q.length>5&&void 0!==Q[5]&&Q[5],p=Q.length>6&&void 0!==Q[6]?Q[6]:"",h=Q.length>7&&void 0!==Q[7]?Q[7]:null,t.prev=4,"undefined"!=typeof Chart){t.next=15;break}return t.next=8,Promise.resolve().then(r.bind(r,121));case 8:return f=t.sent,v=f.loadChartJs,t.next=12,v();case 12:if(t.sent){t.next=15;break}throw new Error("Failed to load Chart.js");case 15:if(-1!==a){t.next=19;break}return t.next=18,et(e,u,l);case 18:return t.abrupt("return",t.sent);case 19:return t.next=21,(0,n.wi)(u,l,a);case 21:if(m=t.sent,g=document.getElementById(e)){t.next=25;break}return t.abrupt("return",null);case 25:if(0!==m.length){t.next=29;break}return(0,c.a1)(g),t.abrupt("return",null);case 29:if(y={},w={},h){b=A(m);try{for(b.s();!(x=b.n()).done;)D=x.value,k=D.datum,(E=(0,c.nF)(D,h)).consumption,S=E.counterValues,C=E.filteredDailyUsage,y[k]=C||0,w[k]=D.val_end||(S.length>0?S[S.length-1]:0)}catch(t){b.e(t)}finally{b.f()}}else m.forEach((function(t){y[t.datum]=t.usage_day||0,w[t.datum]=t.val_end||0}));for(T=new Date(u),(L=new Date(l)).setHours(23,59,59);T<=L;)j=T.toISOString().split("T")[0],y[j]||(y[j]=0),w[j]||((P=new Date(T)).setDate(P.getDate()-1),_=P.toISOString().split("T")[0],w[j]=w[_]||0),T.setDate(T.getDate()+1);if(O=Object.keys(y).sort(),I=O.map((function(t){return y[t]})),N=O.map((function(t){return w[t]})),F=(0,c.yC)(O),M=o(I),V=window.formatNumber(M.total," kWh",window.getCurrentLanguage(),2),W=window.formatNumber(M.average," kWh",window.getCurrentLanguage(),2),B=window.getTranslatedText("chartStats","total"),H=window.getTranslatedText("charts","day"),U="".concat(V," ").concat(B," - \xd8 ").concat(W," / ").concat(H),g.innerHTML='\n            <canvas id="'.concat(e,'-canvas"></canvas>\n        '),R=document.getElementById("".concat(e,"-canvas"))){t.next=50;break}return t.abrupt("return",null);case 50:return q={labels:F,datasets:[(0,c.lN)("daily",I,N)],rawDates:O},M.average>0&&(X=i(M,I.length),q.datasets.push(X.averageLine)),q.rawDates=O,K[e]=q,Z[e]=M,J=R.getContext("2d"),($=new Chart(J,{type:"bar",data:q,options:G(G({},(0,c.Ah)()),{},{responsive:!0,plugins:G(G({},(0,c.Ah)().plugins),{},{title:{display:!0,position:"bottom",text:U}}),onClick:d?function(t,e){if("click"===t.type&&e&&1===e.length){var r=e[0].index,n=O[r];s.includes(n)&&dt(a,p,n,s,h)}}:void 0,layout:{padding:{top:10,right:25,bottom:10,left:10}},animation:{duration:0},resizeDelay:0})})).zaehlerid=a,$.messstartDate=h,Y[e]=$,t.abrupt("return",$);case 63:return t.prev=63,t.t0=t.catch(4),t.abrupt("return",null);case 67:case"end":return t.stop()}}),t,null,[[4,63]])}))),J.apply(this,arguments)}function $(t,e,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(null!=t){var i=Number(t);if(!isNaN(i)){if(!r){var u=new Date;r="".concat(u.getFullYear(),"-").concat(String(u.getMonth()+1).padStart(2,"0"),"-").concat(String(u.getDate()).padStart(2,"0"))}var l=null;if(a&&(l=document.getElementById(a))){var s=bootstrap.Modal.getInstance(l);s&&s.hide()}var d="hourly-data-modal-".concat(t),p="hourly-data-chart-".concat(t),h=document.getElementById(d);h&&h.remove();var f=new Date(r).toLocaleDateString(window.getCurrentLanguage()),v=(0,c.rJ)({modalId:d,chartId:p,title:window.getTranslatedText("charts","hourlyData").replace("{0}","".concat(e," (").concat(f,")")),isHourly:!0,hasParent:!!a});if(document.body.insertAdjacentHTML("beforeend",v),h=document.getElementById(d),function(t,e,r){q.apply(this,arguments)}(p,t,r,o),a&&l){var m=document.getElementById("back-to-daily-btn");m&&m.addEventListener("click",(function(){var t=h.querySelector(".btn-close");t&&t.click()}))}new bootstrap.Modal(h).show(),h.addEventListener("hidden.bs.modal",(function(){if(a){var t=document.getElementById(a);t&&new bootstrap.Modal(t).show()}}))}}}function Q(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=new Date;if(n||(n="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0"))),!r){var s=new Date(l);s.setDate(l.getDate()-6),r="".concat(s.getFullYear(),"-").concat(String(s.getMonth()+1).padStart(2,"0"),"-").concat(String(s.getDate()).padStart(2,"0"))}var d="daily-consumption-modal-".concat(t),p="daily-consumption-chart-".concat(t),h=document.getElementById(d);h&&h.remove();var f,v=(0,c.rJ)({modalId:d,chartId:p,title:window.getTranslatedText("charts","dailyData").replace("{0}",e),isHourly:!1,hasParent:!1,startDate:r,endDate:n,showClickInstructions:o,hideDatePickers:i});if(document.body.insertAdjacentHTML("beforeend",v),h=document.getElementById(d),X(p,t,r,n,a,o,e,u),!i){var m=window.safeParseDate(r),g=window.safeParseDate(n),y=(f=a,function(t){if(Array.isArray(t))return B(t)}(f)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(f)||W(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort(),w=y.length>0?y[0]:null;(0,F.initDatePicker)("".concat(d,"-start-datepicker"),m,a,w,null),(0,F.initDatePicker)("".concat(d,"-end-datepicker"),g,a,w,null),[document.getElementById("".concat(d,"-start-datepicker")),document.getElementById("".concat(d,"-end-datepicker"))].forEach((function(t){if(t&&(t.classList.add("force-visible"),!t.querySelector(".tempus-dominus-widget"))){var e=t.id.includes("start")?m:g;(0,F.initDatePicker)(t.id,e,a,w,null)}}));var b=new Set(a);(0,F.highlightAvailableDates)("".concat(d,"-start-datepicker"),b),(0,F.highlightAvailableDates)("".concat(d,"-end-datepicker"),b)}var x=null,D=null,k=function(){var r=document.getElementById("".concat(d,"-start-date")).value,n=document.getElementById("".concat(d,"-end-date")).value;r&&n&&(r===x&&n===D||(x=r,D=n,X(p,t,r,n,a,o,e)))};i||(startDatepicker.subscribe(tempusDominus.Namespace.events.update,(function(t){(0,F.highlightAvailableDates)("".concat(d,"-start-datepicker"),availableDatesSet)})),startDatepicker.subscribe(tempusDominus.Namespace.events.change,(function(t){try{var e=(0,F.formatDateFromPicker)(t);e&&(document.getElementById("".concat(d,"-start-date")).value=e,e>document.getElementById("".concat(d,"-end-date")).value&&(document.getElementById("".concat(d,"-end-date")).value=e,t.date&&endDatepicker.dates.setValue(t.date)),k())}catch(t){}})),endDatepicker.subscribe(tempusDominus.Namespace.events.update,(function(t){(0,F.highlightAvailableDates)("".concat(d,"-end-datepicker"),availableDatesSet)})),endDatepicker.subscribe(tempusDominus.Namespace.events.change,(function(t){try{var e=(0,F.formatDateFromPicker)(t);e&&(document.getElementById("".concat(d,"-end-date")).value=e,e<document.getElementById("".concat(d,"-start-date")).value&&(document.getElementById("".concat(d,"-start-date")).value=e,t.date&&startDatepicker.dates.setValue(t.date)),k())}catch(t){}}))),new bootstrap.Modal(h).show()}function tt(){return(tt=R(z().mark((function t(){var e,r,a,o,i,c,u,l;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=new Date,r="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")),t.next=5,(0,n.Bc)();case 5:if((a=t.sent)&&0!==a.length){t.next=9;break}return window.getTranslatedText("totalConsumption","noDataAvailable"),t.abrupt("return");case 9:return o=a[0],(i=new Date(e)).setDate(e.getDate()-29),c=new Date(o+"T00:00:00"),i<c&&(i=new Date(c)),u="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0")),t.next=17,(0,n.ut)(u,r);case 17:if((l=t.sent)&&0!==l.length){t.next=21;break}return window.getTranslatedText("totalConsumption","noDataAvailable"),t.abrupt("return");case 21:l.sort((function(t,e){return t.date.localeCompare(e.date)})),Q(-1,window.getTranslatedText("totalConsumption","chartTitle"),u,r,a,!0),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(0),window.getTranslatedText("totalConsumption","errorLoadingChart");case 31:case"end":return t.stop()}}),t,null,[[0,27]])})))).apply(this,arguments)}function et(t,e,r){return rt.apply(this,arguments)}function rt(){return(rt=R(z().mark((function t(e,a,u){var l,s,d,p,h,f,v,m,g,y,w,b,x,D,k,E,S,C;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"undefined"!=typeof Chart){t.next=11;break}return t.next=4,Promise.resolve().then(r.bind(r,121));case 4:return l=t.sent,s=l.loadChartJs,t.next=8,s();case 8:if(t.sent){t.next=11;break}throw new Error("Failed to load Chart.js");case 11:if(d=document.getElementById(e)){t.next=14;break}return t.abrupt("return",null);case 14:return t.next=16,(0,n.ut)(a,u);case 16:if(0!==(p=t.sent).length){t.next=21;break}return(0,c.a1)(d),t.abrupt("return",null);case 21:if(p.sort((function(t,e){return t.date.localeCompare(e.date)})),h=p.map((function(t){return t.date})),f=p.map((function(t){return t.totalConsumption})),v=(0,c.yC)(h),m=o(f),g=window.formatNumber(m.total," kWh",window.getCurrentLanguage(),2),y=window.formatNumber(m.average," kWh",window.getCurrentLanguage(),2),w=window.getTranslatedText("chartStats","total"),b=window.getTranslatedText("charts","day"),x="".concat(g," ").concat(w," - \xd8 ").concat(y," / ").concat(b),d.innerHTML='\n            <canvas id="'.concat(e,'-canvas"></canvas>\n        '),D=document.getElementById("".concat(e,"-canvas"))){t.next=35;break}return t.abrupt("return",null);case 35:return k={labels:v,datasets:[{label:window.getTranslatedText("totalConsumption","totalDailyConsumption"),data:f,backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}],rawDates:h},m.average>0&&(E=i(m,f.length),k.datasets.push(E.averageLine)),K[e]=k,Z[e]=m,S=D.getContext("2d"),(C=new Chart(S,{type:"bar",data:k,options:G(G({},(0,c.Ah)()),{},{responsive:!0,plugins:G(G({},(0,c.Ah)().plugins),{},{title:{display:!0,position:"bottom",text:x}}),onClick:function(t,e){if("click"===t.type&&e&&1===e.length){var r=e[0].index;nt(-1,h[r],h)}},layout:{padding:{top:10,right:25,bottom:10,left:10}},animation:{duration:0},resizeDelay:0})})).zaehlerid=-1,C.chartDate=null,C.chartTitle=window.getTranslatedText("totalConsumption","chartTitle"),Y[e]=C,K[e]=k,Z[e]=m,t.abrupt("return",C);case 50:return t.prev=50,t.t0=t.catch(0),t.abrupt("return",null);case 54:case"end":return t.stop()}}),t,null,[[0,50]])})))).apply(this,arguments)}function nt(t,e,r,n){try{var a=window.getTranslatedText("totalConsumption","chartTitle"),o="daily-consumption-modal-".concat(t),i=document.getElementById(o);if(i){var c=bootstrap.Modal.getInstance(i);c&&c.hide()}$(-1,a,e,r,o)}catch(t){window.getTranslatedText("totalConsumption","errorLoadingChart")}}function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ot(){ot=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:C(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",f="executing",v="completed",m={};function g(){}function y(){}function w(){}var b={};l(b,i,(function(){return this}));var x=Object.getPrototypeOf,D=x&&x(x(_([])));D&&D!==r&&n.call(D,i)&&(b=D);var k=w.prototype=g.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(a,o,i,c){var u=d(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==at(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function C(e,r,n){var a=p;return function(o,i){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var l=d(e,r,n);if("normal"===l.type){if(a=n.done?v:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=v,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function _(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(at(e)+" is not iterable")}return y.prototype=w,a(k,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:y,configurable:!0}),y.displayName=l(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new S(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(k),l(k,u,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;j(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function it(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){it(o,n,a,i,c,"next",t)}function c(t){it(o,n,a,i,c,"throw",t)}i(void 0)}))}}document.addEventListener("click",(function(t){!function(t,e,r,n){var a,o,i=t.target.closest("[data-export-action]");if(i){t.preventDefault();var c=i.getAttribute("data-chart-id"),u="true"===i.getAttribute("data-include-daily"),l=i.getAttribute("data-export-action"),s=e[c],d=r[c],p=n[c];if(s){var h=s.messstartDate||null,f=c.includes("hourly")?"hourly":"daily",v="kWh";switch(l){case"excel":d&&T(d,p,f,v,u,s,h);break;case"excel-daily":d&&T(d,p,f,v,!0,s,h);break;case"pdf":g(s,(null===(a=s.options.plugins.title)||void 0===a?void 0:a.text)||"Chart",p,f,v,u,h);break;case"pdf-daily":g(s,(null===(o=s.options.plugins.title)||void 0===o?void 0:o.text)||"Chart",p,f,v,!0,h)}}}}(t,Y,K,Z)})),window.showTotalConsumptionChart=function(){return tt.apply(this,arguments)};var ut=!1;function lt(){ut||(ut=!0,document.addEventListener("click",(function(t){var e=t.target.closest('a[data-translation-key="actions.history"]'),r=t.target.closest('td[id^="usage"]');if(e||r)if(t.preventDefault(),r&&"true"===r.getAttribute("data-has-chart-data")){var n=r.id.replace("usage","");if(!n)return;var a=window.getChannelById(n);if(!a)return;var o=window.decodeChannel(a);!function(t,e,r){pt.apply(this,arguments)}(n,o.beschreibung,o.messstart)}else if(e){var i=e.closest('tr[id^="chn"]'),c=e.closest('div[id^="mobile-chn"]'),u=null;if(i?u=i.id.replace("chn",""):c&&(u=c.id.replace("mobile-chn","")),!u)return;var l=window.getChannelById(u);if(!l)return;!function(t,e){st.apply(this,arguments)}(u,window.decodeChannel(l).beschreibung)}})))}function st(){return(st=ct(ot().mark((function t(e,a){var o,i,c,u,l,s,d,p,h,f,v;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="daily-consumption-modal-".concat(e),!(i=document.getElementById(o))){t.next=7;break}return(c=bootstrap.Modal.getInstance(i))?c.show():new bootstrap.Modal(i).show(),t.abrupt("return");case 7:if("undefined"!=typeof Chart){t.next=18;break}return t.next=10,Promise.resolve().then(r.bind(r,121));case 10:return u=t.sent,l=u.loadChartJs,t.next=14,l();case 14:if(t.sent){t.next=18;break}return t.abrupt("return");case 18:if(s=Number(e),!isNaN(s)){t.next=22;break}return t.abrupt("return");case 22:return d=new Date,p="".concat(d.getFullYear(),"-").concat(String(d.getMonth()+1).padStart(2,"0"),"-").concat(String(d.getDate()).padStart(2,"0")),(h=new Date(d)).setDate(d.getDate()-6),f="".concat(h.getFullYear(),"-").concat(String(h.getMonth()+1).padStart(2,"0"),"-").concat(String(h.getDate()).padStart(2,"0")),v=[],t.prev=28,t.next=31,(0,n.kC)(s);case 31:v=t.sent,t.next=38;break;case 35:t.prev=35,t.t0=t.catch(28);case 38:Q(s,a,f,p,v,!0);case 39:case"end":return t.stop()}}),t,null,[[28,35]])})))).apply(this,arguments)}function dt(t,e,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;$(t,e,r,n,"daily-consumption-modal-".concat(t),a)}function pt(){return(pt=ct(ot().mark((function t(e,r,a){var o,i,c,u,l;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new Date(a),i="".concat(o.getFullYear(),"-").concat(String(o.getMonth()+1).padStart(2,"0"),"-").concat(String(o.getDate()).padStart(2,"0")),c=new Date,u="".concat(c.getFullYear(),"-").concat(String(c.getMonth()+1).padStart(2,"0"),"-").concat(String(c.getDate()).padStart(2,"0")),l=[],t.prev=5,t.next=8,(0,n.kC)(Number(e));case 8:l=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5);case 14:Q(Number(e),r,i,u,l,!0,!0,a);case 15:case"end":return t.stop()}}),t,null,[[5,11]])})))).apply(this,arguments)}},690:(t,e,r)=>{r.d(e,{Bc:()=>ot,Qm:()=>T,WL:()=>L,kC:()=>G,tZ:()=>z,ut:()=>at,wi:()=>M});var n=r(313);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return u(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(){d=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var a=e&&e.prototype instanceof w?e:w,i=Object.create(a.prototype),c=new O(n||[]);return o(i,"_invoke",{value:L(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function w(){}function b(){}function x(){}var D={};s(D,c,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,c)&&(D=E);var S=x.prototype=w.prototype=Object.create(D);function C(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,c,u){var l=h(t[o],t,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==a(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(d).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function L(e,r,n){var a=f;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=h(e,r,n);if("normal"===l.type){if(a=n.done?g:v,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=g,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return b.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(T.prototype),s(T.prototype,u,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new T(p(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(S),s(S,l,"Generator"),s(S,c,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function p(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){p(o,n,a,i,c,"next",t)}function c(t){p(o,n,a,i,c,"throw",t)}i(void 0)}))}}var f,v,m="ctoolsHourlyDataV2",g=3,y="hourlyReadings",w="ctoolsHourlyDataSyncVersion",b="1.0.1",x=1e4,D="ctoolsLastHourlyPoll",k="ctoolsTotalConsumption",E=2,S="dailyAggregates",C=!1;function T(){if(!C){C=!0;var t=indexedDB.deleteDatabase("ctoolsHourlyData");t.onsuccess=function(){},t.onerror=function(t){},t.onblocked=function(){};var e=indexedDB.open(m,g);e.onerror=function(t){},e.onupgradeneeded=function(t){var e=t.target.result;if(1===t.oldVersion&&e.objectStoreNames.contains(y)&&e.deleteObjectStore(y),!e.objectStoreNames.contains(y)){var r=e.createObjectStore(y,{keyPath:"dsid"});r.createIndex("zaehlerid","zaehlerid",{unique:!1}),r.createIndex("datum","datum",{unique:!1}),r.createIndex("zaehlerid_datum",["zaehlerid","datum"],{unique:!1}),r.createIndex("complete_status","complete_status",{unique:!1})}},e.onsuccess=function(t){v=t.target.result,localStorage.getItem(w)!==b&&localStorage.setItem(w,b),new Promise((function(t,e){var r=indexedDB.open(k,E);r.onerror=function(t){e(t.target.error)},r.onupgradeneeded=function(t){var e=t.target.result;if(!e.objectStoreNames.contains(S)){var r=e.createObjectStore(S,{keyPath:"date"});r.createIndex("date","date",{unique:!0}),r.createIndex("complete_status","complete_status",{unique:!1});for(var n=0;n<24;n++){var a="usage_".concat(n.toString().padStart(2,"0"));r.createIndex(a,a,{unique:!1})}}},r.onsuccess=function(e){f=e.target.result,t(!0)}})).then((function(){return new Promise((function(t){if(f)try{var e=f.transaction([S],"readonly").objectStore(S).count();e.onsuccess=function(e){e.target.result,t(!0)},e.onerror=function(e){t(!1)}}catch(e){t(!1)}else t(!1)}))})).then((function(t){t?(O(),Q(),A()):(O(),A())})).catch((function(t){O(),A()}))}}}function L(t){return j.apply(this,arguments)}function j(){return(j=h(d().mark((function t(e){var r,n,a,o,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f){t.next=3;break}return t.abrupt("return",null);case 3:return t.prev=3,t.next=6,nt(e);case 6:if(r=t.sent){t.next=10;break}return t.abrupt("return",null);case 10:for(n={datum:e,zaehlerid:-1,usage_day:r.totalConsumption||0,complete_status:r.complete_status||0},a=0;a<24;a++)o="usage_".concat(a.toString().padStart(2,"0")),i=r[o]||0,n[o]=i;return t.abrupt("return",n);case 15:return t.prev=15,t.t0=t.catch(3),t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,null,[[3,15]])})))).apply(this,arguments)}function P(){return _.apply(this,arguments)}function _(){return(_=h(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){try{var r=function(){var e=new Date,r="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"));if(null!==o){var u=n.index("datum").openCursor(IDBKeyRange.upperBound(r,!0),"prev");u.onsuccess=function(e){var r=e.target.result;r&&(o=r.value.dsid),t({oldestDsid:a,newestDsid:o,oldestIncompleteDsid:i,highestCompleteDsid:c})},u.onerror=function(e){t({oldestDsid:a,newestDsid:o,oldestIncompleteDsid:i,highestCompleteDsid:c})}}else t({oldestDsid:a,newestDsid:o,oldestIncompleteDsid:i,highestCompleteDsid:c})};if(!v)return void e(new Error("Database not initialized"));var n=v.transaction([y],"readonly").objectStore(y),a=null,o=null,i=null,c=null;n.openCursor(null,"next").onsuccess=function(e){var u=e.target.result;if(u){a=u.value.dsid;var l=n.openCursor(null,"prev");l.onsuccess=function(e){var u=e.target.result;if(u){o=u.value.dsid;var l=n.index("complete_status"),s=l.openCursor(IDBKeyRange.only(0),"next");s.onsuccess=function(t){var e=t.target.result;e&&(i=e.value.dsid);var n=l.openCursor(IDBKeyRange.only(1),"prev");n.onsuccess=function(t){var e=t.target.result;e&&(c=e.value.dsid),r()},n.onerror=function(t){r()}},s.onerror=function(t){r()}}else t({oldestDsid:a,newestDsid:null,oldestIncompleteDsid:null,highestCompleteDsid:null})},l.onerror=function(e){t({oldestDsid:a,newestDsid:null,oldestIncompleteDsid:null,highestCompleteDsid:null})}}else t({oldestDsid:null,newestDsid:null,oldestIncompleteDsid:null,highestCompleteDsid:null})}}catch(t){e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){return new Promise(function(){var e=h(d().mark((function e(a,o){var i,c,u,l,s,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:return i=e.sent,c=i.oldestDsid,u=i.newestDsid,l=i.oldestIncompleteDsid,s=i.highestCompleteDsid,e.next=10,t(l,s,u);case 10:return e.next=12,P();case 12:if(p=e.sent,!(null!==(c=p.oldestDsid)&&c>1)){e.next=19;break}return e.next=17,r(c);case 17:e.next=19;break;case 19:if(localStorage.setItem(D,Date.now().toString()),"function"!=typeof n.n6){e.next=29;break}return e.prev=21,e.next=24,(0,n.n6)();case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(21);case 29:a(!0),e.next=36;break;case 32:e.prev=32,e.t1=e.catch(0),o(e.t1);case 36:case"end":return e.stop()}}),e,null,[[0,32],[21,26]])})));return function(t,r){return e.apply(this,arguments)}}());function t(t,r,n){return e.apply(this,arguments)}function e(){return(e=h(d().mark((function t(e,r,n){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null!==e?e-1:null!==r?r:n,t.next=4,o("newestDsid",a,!0);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function r(t){return a.apply(this,arguments)}function a(){return(a=h(d().mark((function t(e){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.next=4,o("oldestDsid",r,!1);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(t,e,r){return i.apply(this,arguments)}function i(){return(i=h(d().mark((function t(e,r,n){var a,o,i,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={action:"hourlyData",limit:x},null!==r&&(a[e]=r),o=!1,i=0,c=d().mark((function t(){var e,r,c,u,l,s,p,h;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("index.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)});case 2:if((r=t.sent).ok){t.next=5;break}throw new Error("HTTP error: ".concat(r.status));case 5:return t.next=7,r.json();case 7:if(c=t.sent,u=c.data||[],o=(null===(e=c.meta)||void 0===e?void 0:e.has_more)||!1,0!==u.length){t.next=12;break}return t.abrupt("return",1);case 12:return l=new Date,s="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0")),t.next=16,I(u,s);case 16:return i+=u.length,t.next=19,N();case 19:o&&(p=0,h=Number.MAX_SAFE_INTEGER,u.forEach((function(t){t[0]>p&&(p=t[0]),t[0]<h&&(h=t[0])})),a={action:"hourlyData",limit:x},n?a.newestDsid=p:a.oldestDsid=h);case 20:case"end":return t.stop()}}),t)}));case 5:return t.delegateYield(c(),"t0",6);case 6:if(!t.t0){t.next=8;break}return t.abrupt("break",9);case 8:if(o){t.next=5;break}case 9:if(!(i>0)){t.next=18;break}return t.prev=10,t.next=13,Q();case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(10);case 18:localStorage.setItem(D,Date.now().toString());case 19:case"end":return t.stop()}}),t,null,[[10,15]])})))).apply(this,arguments)}}function I(t,e){return new Promise((function(r,n){try{if(!v)return void n(new Error("Database not initialized"));var a=v.transaction([y],"readwrite"),o=a.objectStore(y);a.onerror=function(t){n(t.target.error)},a.oncomplete=function(){r()},t.forEach((function(t){try{var r=Number(t[0]),n=Number(t[1]),a=String(t[2]),i=e&&a<e?1:0,c={dsid:r,zaehlerid:n,datum:a,val_start:null!==t[3]?Number(t[3]):0,val_0:null!==t[4]?Number(t[4]):0,val_1:null!==t[5]?Number(t[5]):0,val_2:null!==t[6]?Number(t[6]):0,val_3:null!==t[7]?Number(t[7]):0,val_4:null!==t[8]?Number(t[8]):0,val_5:null!==t[9]?Number(t[9]):0,val_6:null!==t[10]?Number(t[10]):0,val_7:null!==t[11]?Number(t[11]):0,val_8:null!==t[12]?Number(t[12]):0,val_9:null!==t[13]?Number(t[13]):0,val_10:null!==t[14]?Number(t[14]):0,val_11:null!==t[15]?Number(t[15]):0,val_12:null!==t[16]?Number(t[16]):0,val_13:null!==t[17]?Number(t[17]):0,val_14:null!==t[18]?Number(t[18]):0,val_15:null!==t[19]?Number(t[19]):0,val_16:null!==t[20]?Number(t[20]):0,val_17:null!==t[21]?Number(t[21]):0,val_18:null!==t[22]?Number(t[22]):0,val_19:null!==t[23]?Number(t[23]):0,val_20:null!==t[24]?Number(t[24]):0,val_21:null!==t[25]?Number(t[25]):0,val_22:null!==t[26]?Number(t[26]):0,val_23:null!==t[27]?Number(t[27]):0,val_end:null!==t[28]?Number(t[28]):0,usage_day:null!==t[29]?Number(t[29]):0,complete_status:i};o.put(c)}catch(t){}}))}catch(t){n(t)}}))}function N(){return F.apply(this,arguments)}function F(){return(F=h(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){try{if(!v)return void t();var r=v.transaction([y],"readonly").objectStore(y).index("complete_status").getAll(IDBKeyRange.only(0));r.onsuccess=function(e){var r=e.target.result||[];if(r.length>0&&(r.sort((function(t,e){return t.dsid-e.dsid})),r.map((function(t){return{dsid:t.dsid,date:t.datum,zaehlerid:t.zaehlerid}})),r.length>20)){var n={};r.forEach((function(t){n[t.datum]=(n[t.datum]||0)+1}))}t()},r.onerror=function(e){t()}}catch(e){t()}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){var t=function(){var e=new Date,r=60*(60-e.getMinutes()-1)*1e3+1e3*(60-e.getSeconds())+(1e3-e.getMilliseconds())+(6e4+Math.floor(12e4*Math.random()));Math.floor(r/6e4),Math.floor(r%6e4/1e3),setTimeout((function(){O().then((function(){t()})).catch((function(e){t()}))}),r)},e=function(){var t=localStorage.getItem(D),e=new Date;t?(e-new Date(parseInt(t,10)))/36e5>1.5&&O():O()};e(),t(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&e()})),setInterval(e,9e5)}function z(t,e){return new Promise((function(r,n){try{var a=function(){var t=i.index("zaehlerid").getAll(o);t.onsuccess=function(t){var n=t.target.result.find((function(t){return t.datum===e}));r(n||null)},t.onerror=function(t){n(t.target.error)}};if(!v)return void n(new Error("Database not initialized"));if(null==t)return void n(new Error("zaehlerid must be provided"));var o=Number(t);if(isNaN(o))return void n(new Error("Invalid zaehlerid: ".concat(t)));var i=v.transaction([y],"readonly").objectStore(y);if(i.indexNames.contains("zaehlerid_datum")){var c=i.index("zaehlerid_datum"),u=[o,e],l=c.get(u);l.onsuccess=function(t){var e=t.target.result;r(e||null)},l.onerror=function(t){a()}}else a()}catch(t){n(t)}}))}function M(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(n,a){try{var o=function(){if(null!==r&&"number"==typeof r){var a=u.index("zaehlerid").getAll(r);a.onsuccess=function(r){var a=(r.target.result||[]).filter((function(r){return r.datum>=t&&r.datum<=e}));n(a)},a.onerror=function(t){i()}}else i()},i=function(){var o=u.index("datum"),i=IDBKeyRange.bound(t,e),c=o.getAll(i);c.onsuccess=function(t){var e=t.target.result||[],a=null!==r&&"number"==typeof r?e.filter((function(t){return t.zaehlerid===r})):e;n(a)},c.onerror=function(t){a(t.target.error)}};if(!v)return void a(new Error("db_not_init"));if(!t||!e)return void a(new Error("supply_start_and_end_date"));if(!/^\d{4}-\d{2}-\d{2}$/.test(t)||!/^\d{4}-\d{2}-\d{2}$/.test(e))return void a(new Error("date_mismatch"));if(t>e){var c=[e,t];t=c[0],e=c[1]}var u=v.transaction([y],"readonly").objectStore(y);if(null!==r&&"number"==typeof r)if(u.indexNames.contains("zaehlerid_datum")){var l=u.index("zaehlerid_datum"),s=[],d=[r,t],p=[r,e],h=IDBKeyRange.bound(d,p),f=l.openCursor(h);f.onsuccess=function(t){var e=t.target.result;e?(s.push(e.value),e.continue()):n(s)},f.onerror=function(t){o()}}else o();else o()}catch(t){a(t)}}))}function G(t){return new Promise((function(e,r){try{if(!v)return void r(new Error("Database not initialized"));if(null==t)return void r(new Error("zaehlerid must be provided"));var n=Number(t);if(isNaN(n))return void r(new Error("Invalid zaehlerid: ".concat(t)));var a=v.transaction([y],"readonly").objectStore(y).index("zaehlerid").getAll(n);a.onsuccess=function(t){var r=t.target.result,n=new Set;r.forEach((function(t){t.datum&&n.add(t.datum)}));var a=Array.from(n).sort();e(a)},a.onerror=function(t){r(t.target.error)}}catch(t){r(t)}}))}function V(t){return W.apply(this,arguments)}function W(){return(W=h(d().mark((function t(e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){if(v)try{var n=v.transaction([y],"readonly").objectStore(y).index("datum").getAll(IDBKeyRange.only(e));n.onsuccess=function(e){var r=e.target.result||[],n=i(new Set(r.map((function(t){return t.zaehlerid}))));t(n)},n.onerror=function(e){t([])}}catch(e){t([])}else r(new Error("Hourly database not initialized"))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t){return H.apply(this,arguments)}function H(){return H=h(d().mark((function t(e){var r,n,a,o,i,c,u,l=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:[],f){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,K(e,r);case 7:if(n=t.sent,0!==Object.keys(n).length){t.next=10;break}return t.abrupt("return");case 10:return a=R(n),o=U(n),i=new Date,c="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0")),u=e<c?1:0,t.next=17,Y(e,a,o,u,Object.keys(n).length);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4);case 22:case"end":return t.stop()}}),t,null,[[4,19]])}))),H.apply(this,arguments)}function U(t){for(var e={},r=0;r<24;r++){var a="usage_".concat(r.toString().padStart(2,"0"));e[a]=0}for(var o in t){var i=t[o];i&&(0,n.nF)(i).consumption.forEach((function(t,r){if(r<24&&!isNaN(t)){var n="usage_".concat(r.toString().padStart(2,"0"));e[n]+=t}}))}return e}function R(t){var e=0;for(var r in t){var n=t[r];n&&n.usage_day&&(e+=Number(n.usage_day)||0)}return e}function Y(t,e,r,n,a){return new Promise((function(o,i){if(f)try{var c=f.transaction([S],"readwrite");c.onerror=function(t){i(t.target.error)},c.onabort=function(t){i(new Error("Transaction aborted"))};var u=c.objectStore(S),d=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({date:t,totalConsumption:Number(e),complete_status:Number(n),channelCount:Number(a),lastUpdated:Date.now()},r),p=u.put(d);p.onsuccess=function(t){o()},p.onerror=function(t){i(t.target.error)},c.oncomplete=function(){}}catch(t){i(t)}else i(new Error("Total consumption database not initialized"))}))}function K(t,e){return Z.apply(this,arguments)}function Z(){return(Z=h(d().mark((function t(e,r){var n,a,i,c,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},t.prev=1,r&&0!==r.length){t.next=10;break}return t.next=5,V(e);case 5:if(0!==(r=t.sent).length){t.next=10;break}return t.next=9,q();case 9:r=t.sent;case 10:a=o(r),t.prev=12,a.s();case 14:if((i=a.n()).done){t.next=28;break}return c=i.value,t.prev=16,t.next=19,z(c,e);case 19:(u=t.sent)&&(n[c]=u),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(16);case 26:t.next=14;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(12),a.e(t.t1);case 33:return t.prev=33,a.f(),t.finish(33);case 36:t.next=41;break;case 38:t.prev=38,t.t2=t.catch(1);case 41:return t.abrupt("return",n);case 42:case"end":return t.stop()}}),t,null,[[1,38],[12,30,33,36],[16,23]])})))).apply(this,arguments)}function q(){return X.apply(this,arguments)}function X(){return(X=h(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$channels||!Array.isArray(window.$channels)){t.next=4;break}if(!((e=window.$channels.map((function(t){return Number(t[0])})).filter((function(t){return!isNaN(t)}))).length>0)){t.next=4;break}return t.abrupt("return",e);case 4:return t.abrupt("return",J());case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return $.apply(this,arguments)}function $(){return($=h(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if(v)try{var r=v.transaction([y],"readonly").objectStore(y).index("zaehlerid").getAllKeys();r.onsuccess=function(e){var r=i(new Set(e.target.result));t(r)},r.onerror=function(e){t([])}}catch(e){t([])}else e(new Error("Hourly database not initialized"))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(){return tt.apply(this,arguments)}function tt(){return(tt=h(d().mark((function t(){var e,r,n,a,i,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&f){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,et();case 6:e=t.sent,r=o(e),t.prev=8,r.s();case 10:if((n=r.n()).done){t.next=16;break}return a=n.value,t.next=14,B(a);case 14:t.next=10;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:return i=new Date,c="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0")),t.next=28,B(c);case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(3);case 33:case"end":return t.stop()}}),t,null,[[3,30],[8,18,21,24]])})))).apply(this,arguments)}function et(){return rt.apply(this,arguments)}function rt(){return(rt=h(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if(v)try{var r=v.transaction([y],"readonly").objectStore(y).index("complete_status"),n=r.getAllKeys(IDBKeyRange.only(1));n.onsuccess=function(e){e.target.result;var n=new Set,a=r.getAll(IDBKeyRange.only(1));a.onsuccess=function(e){(e.target.result||[]).forEach((function(t){t.datum&&n.add(t.datum)}));var r=Array.from(n).sort();t(r)},a.onerror=function(e){t([])}},n.onerror=function(e){t([])}}catch(e){t([])}else e(new Error("Hourly database not initialized"))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(t){return new Promise((function(e,r){if(f)try{var n=f.transaction([S],"readonly").objectStore(S).get(t);n.onsuccess=function(t){e(t.target.result||null)},n.onerror=function(t){r(t.target.error)}}catch(t){r(t)}else r(new Error("Total consumption database not initialized"))}))}function at(t,e){return new Promise((function(r,n){if(f)try{var a=f.transaction([S],"readonly").objectStore(S).index("date"),o=IDBKeyRange.bound(t,e),i=a.getAll(o);i.onsuccess=function(t){var e=t.target.result||[];r(e)},i.onerror=function(t){n(t.target.error)}}catch(t){n(t)}else n(new Error("Total consumption database not initialized"))}))}function ot(){return it.apply(this,arguments)}function it(){return(it=h(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if(f)try{var r=f.transaction([S],"readonly").objectStore(S).index("date").getAllKeys();r.onsuccess=function(e){var r=e.target.result||[];r.sort(),t(r)},r.onerror=function(e){t([])}}catch(e){t([])}else e(new Error("Total consumption database not initialized"))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},750:(t,e,r)=>{var n={"./charts-lang-de-DE.js":456,"./charts-lang-en-US.js":559,"./charts-lang-es-ES.js":290,"./charts-lang-fr-FR.js":178,"./charts-lang-hr-HR.js":778,"./charts-lang-it-IT.js":240,"./charts-lang-nl-NL.js":846,"./charts-lang-sl-SI.js":359};function a(t){return Promise.resolve().then((()=>{if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r(n[t])}))}a.keys=()=>Object.keys(n),a.id=750,t.exports=a},778:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"Brojilo: {0}",backToDailyView:"Natrag na dnevni pregled",clickDayInstructions:"Kliknite na dan za pregled satnih podataka",hourlyConsumption:"Satna Potro\u0161nja (kWh)",dailyConsumption:"Dnevna Potro\u0161nja (kWh)",hourlyData:"Satni Podaci: {0}",dailyData:"Dnevna Potro\u0161nja: {0}",date:"Datum:",startDate:"Po\u010detni Datum",endDate:"Zavr\u0161ni Datum",consumption:"Potro\u0161nja: {0}",noDataAvailable:"Nema dostupnih podataka za ovo razdoblje.",close:"Zatvori",day:"Dan",hour:"Sat",history:{title:"Povijest: {0}",hourlyData:"Satna Potro\u0161nja (Danas)",dailyData:"Dnevna Potro\u0161nja (Zadnjih 7 Dana)"},totalConsumption:"Analiza"},chartStats:{title:"Statistika",total:"Ukupna Potro\u0161nja",average:"Prosjek",median:"Medijan",statistics:"Statistika",averageLine:"Prosjek",medianLine:"Medijan"},chartExport:{abortExport:"Odustani",processingMonth:"Obrada mjeseca: {current} / {total}",processingDay:"Obrada dana: {current} / {total}",aborting:"Odustajanje...",exportCancelled:"Izvoz PDF-a je otkazan",hourlyConsumptionData:"Podaci o Satnoj Potro\u0161nji",dailyConsumptionData:"Podaci o Dnevnoj Potro\u0161nji",exportDropdown:"Izvoz",exportingPDF:"Stvaranje PDF-a...",exportPDFWithDaily:"PDF sa satnim vrijednostima",exportExcelWithDaily:"Excel sa satnim vrijednostima",overviewSheet:"Pregled",detailsSheet:"Dnevni Detalji",exportExcel:"Izvoz Excel",exportPDF:"Izvoz PDF",hour:"Sat",date:"Datum",consumption:"Potro\u0161nja",counter:"Brojilo",dataSheet:"Podaci o Potro\u0161nji",errorExporting:"Gre\u0161ka pri izvozu podataka"},chartPDF:{pageNumbers:"Stranica {current} od {total}"},totalConsumption:{menuItem:"Grafikon Ukupne Potro\u0161nje",chartTitle:"Ukupna Potro\u0161nja Lokacije",totalDailyConsumption:"Ukupna Dnevna Potro\u0161nja (kWh)",noDataAvailable:"Nema dostupnih podataka o ukupnoj potro\u0161nji za odabrano razdoblje.",errorLoadingChart:"Pogre\u0161ka pri u\u010ditavanju grafikona ukupne potro\u0161nje."}}},846:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n={charts:{counterValue:"Teller: {0}",backToDailyView:"Terug naar dagelijks overzicht",clickDayInstructions:"Klik op een dag om uurgegevens te bekijken",hourlyConsumption:"Uurlijks Verbruik (kWh)",dailyConsumption:"Dagelijks Verbruik (kWh)",hourlyData:"Uurlijkse Gegevens: {0}",dailyData:"Dagelijks Verbruik: {0}",date:"Datum:",startDate:"Startdatum",endDate:"Einddatum",consumption:"Verbruik: {0}",noDataAvailable:"Geen gegevens beschikbaar voor deze periode.",close:"Sluiten",day:"Dag",hour:"Uur",history:{title:"Geschiedenis: {0}",hourlyData:"Uurlijks Verbruik (Vandaag)",dailyData:"Dagelijks Verbruik (Laatste 7 Dagen)"},totalConsumption:"Analyses"},chartStats:{title:"Statistieken",total:"Totaal Verbruik",average:"Gemiddelde",median:"Mediaan",statistics:"Statistieken",averageLine:"Gemiddelde",medianLine:"Mediaan"},chartExport:{abortExport:"Afbreken",processingMonth:"Maand verwerken: {current} / {total}",processingDay:"Dag verwerken: {current} / {total}",aborting:"Afbreken...",exportCancelled:"PDF-export is geannuleerd",hourlyConsumptionData:"Uurlijkse Verbruiksgegevens",dailyConsumptionData:"Dagelijkse Verbruiksgegevens",exportDropdown:"Exporteren",exportingPDF:"PDF wordt gegenereerd...",exportPDFWithDaily:"PDF met uurwaarden",exportExcelWithDaily:"Excel met uurwaarden",overviewSheet:"Overzicht",detailsSheet:"Dagelijkse Details",exportExcel:"Exporteren naar Excel",exportPDF:"Exporteren als PDF",hour:"Uur",date:"Datum",consumption:"Verbruik",counter:"Tellerstand",dataSheet:"Verbruiksgegevens",errorExporting:"Fout bij exporteren gegevens"},chartPDF:{pageNumbers:"Pagina {current} van {total}"},totalConsumption:{menuItem:"Totaal Verbruik Grafiek",chartTitle:"Totaal Verbruik van de Locatie",totalDailyConsumption:"Dagelijks Totaal Verbruik (kWh)",noDataAvailable:"Geen totaal verbruiksgegevens beschikbaar voor de geselecteerde periode.",errorLoadingChart:"Fout bij het laden van de totaal verbruik grafiek."}}}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.e=()=>Promise.resolve(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(t=n(405)).keys().forEach(t),(()=>{var t=n(121),e=n(690),r=n(618),a=n(313);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),c=new O(n||[]);return a(i,"_invoke",{value:L(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function w(){}function b(){}function x(){}var D={};d(D,c,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(I([])));E&&E!==r&&n.call(E,c)&&(D=E);var S=x.prototype=w.prototype=Object.create(D);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(a,i,c,u){var l=h(t[a],t,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==o(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(d).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,u)}))}u(l.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function L(e,r,n){var a=f;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=h(e,r,n);if("normal"===l.type){if(a=n.done?g:v,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=g,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return b.prototype=x,a(S,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(T.prototype),d(T.prototype,u,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new T(p(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(S),d(S,s,"Generator"),d(S,c,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function s(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){s(o,n,a,i,c,"next",t)}function c(t){s(o,n,a,i,c,"throw",t)}i(void 0)}))}}void 0===window._chartsModuleInitialized&&(window._chartsModuleInitialized=!1);var p,h=new Set,f={initialized:!1,initializing:!1,error:null};function v(){return m.apply(this,arguments)}function m(){return m=d(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b();case 3:return window.translations=window.translations||{},window.translations.charts=window.translations.charts||{},window.translations.chartStats=window.translations.chartStats||{},window.translations.chartExport=window.translations.chartExport||{},window.translations.chartPDF=window.translations.chartPDF||{},t.next=10,y(window.getCurrentLanguage());case 10:return document.addEventListener("languageChanged",function(){var t=d(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.detail||!e.detail.newLanguage){t.next=4;break}return t.next=3,y(e.detail.newLanguage);case 3:g();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.addEventListener("channelsUpdated",d(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof updateUsageCellStyling){t.next=9;break}return t.prev=1,t.next=4,updateUsageCellStyling();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))),e=void 0,(e=document.createElement("style")).textContent="\n    /* Chart statistics panel */\n    .chart-stats-panel {\n        display: flex;\n        justify-content: space-around;\n        background-color: #f8f9fa;\n        border-radius: 4px;\n        padding: 8px 16px;\n        margin: 15px 0;\n        border: 1px solid #dee2e6;\n    }\n    \n    .chart-stats-panel .stat-item {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 5px 10px;\n    }\n    \n    .chart-stats-panel .stat-label {\n        font-size: 0.85rem;\n        color: #6c757d;\n        margin-bottom: 3px;\n    }\n    \n    .chart-stats-panel .stat-value {\n        font-size: 1.1rem;\n        font-weight: 500;\n        color: #0076A8; /* CTOOLS blue */\n    }\n    \n    /* Export buttons container */\n    .chart-export-buttons {\n        display: flex;\n        justify-content: flex-end;\n        gap: 10px;\n        margin-bottom: 15px;\n    }\n    \n    .chart-export-buttons .btn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        white-space: nowrap;\n    }\n    \n    .chart-export-buttons .btn i {\n        margin-right: 5px;\n    }\n    \n    /* Responsive adjustments */\n    @media (max-width: 768px) {\n        .chart-stats-panel {\n            flex-direction: column;\n            align-items: center;\n            padding: 8px;\n        }\n        \n        .chart-stats-panel .stat-item {\n            margin-bottom: 5px;\n            width: 100%;\n            flex-direction: row;\n            justify-content: space-between;\n        }\n        \n        .chart-stats-panel .stat-label {\n            margin-right: 10px;\n            margin-bottom: 0;\n        }\n        \n        /* Adjust export buttons for mobile */\n        .chart-export-buttons {\n            justify-content: center;\n        }\n        \n        .chart-export-buttons .btn {\n            padding: 4px 8px;\n            font-size: 0.85rem;\n        }\n    }\n    ",document.head.appendChild(e),t.abrupt("return",!0);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",!1);case 21:case"end":return t.stop()}var e}),t,null,[[0,17]])}))),m.apply(this,arguments)}function g(){var t=document.getElementById("total-consumption-chart");if(t){var e=t.querySelector("span");e&&(e.textContent=window.getTranslatedText("totalConsumption","menuItem"))}}function y(t){return w.apply(this,arguments)}function w(){return(w=d(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||"en-US",!h.has(e)){t.next=4;break}return(0,a.Se)(),t.abrupt("return",!0);case 4:return t.prev=4,t.next=7,n(750)("./charts-lang-".concat(e,".js"));case 7:if(!(r=t.sent).default){t.next=20;break}return r.default.charts&&(window.translations.charts=c(c({},window.translations.charts),r.default.charts)),r.default.chartStats&&(window.translations.chartStats=c(c({},window.translations.chartStats),r.default.chartStats)),r.default.chartExport&&(window.translations.chartExport=c(c({},window.translations.chartExport),r.default.chartExport)),r.default.chartPDF&&(window.translations.chartPDF=c(c({},window.translations.chartPDF),r.default.chartPDF)),r.default.totalConsumption&&(window.translations.totalConsumption=c(c({},window.translations.totalConsumption),r.default.totalConsumption)),(0,a.Se)(),h.add(e),t.abrupt("return",!0);case 20:throw new Error("Invalid language module format for ".concat(e));case 21:t.next=30;break;case 23:if(t.prev=23,t.t0=t.catch(4),"en-US"===e){t.next=29;break}return t.abrupt("return",y("en-US"));case 29:return t.abrupt("return",!1);case 30:case"end":return t.stop()}}),t,null,[[4,23]])})))).apply(this,arguments)}function b(){return x.apply(this,arguments)}function x(){return(x=d(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,D("https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js");case 4:return t.next=6,D("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js");case 6:return t.next=8,D("https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js");case 8:return t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function D(t){return new Promise((function(e,r){var n=document.createElement("script");n.src=t,n.async=!0,n.onload=function(){return e()},n.onerror=function(t){return r(t)},document.head.appendChild(n)}))}(p=d(l().mark((function n(){var a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.__CTOOLSchartsModuleInitialized){n.next=2;break}return n.abrupt("return");case 2:return window.__CTOOLSchartsModuleInitialized=!0,f.initializing=!0,n.prev=4,n.next=7,(0,r.C)();case 7:return n.next=9,(0,e.Qm)();case 9:return n.next=11,(0,t.initializeChartResources)();case 11:return n.next=13,v();case 13:if(a=n.sent,f.initialized=a,f.initializing=!1,!a){n.next=21;break}document.dispatchEvent(new CustomEvent("moduleReady",{detail:{module:"charts",success:!0}})),n.next=22;break;case 21:throw new Error("Chart initialization failed");case 22:n.next=30;break;case 24:n.prev=24,n.t0=n.catch(4),f.error=n.t0,f.initializing=!1,document.dispatchEvent(new CustomEvent("moduleReady",{detail:{module:"charts",success:!1,error:n.t0.message}}));case 30:case"end":return n.stop()}}),n,null,[[4,24]])}))),function(){return p.apply(this,arguments)})()})();